<!doctype html>
<html lang="fr-FR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.19" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Manipuler la BdD avec PDO (PHP Data Object) | Cours de Rémi Jarjat</title><meta name="description" content="Les formations de Rémi Jarjat pour Human Booster">
    <link rel="preload" href="/cours/assets/style-BEIxaUV1.css" as="style"><link rel="stylesheet" href="/cours/assets/style-BEIxaUV1.css">
    <link rel="modulepreload" href="/cours/assets/app-BkblVdII.js"><link rel="modulepreload" href="/cours/assets/30-pdo.html-DZNmK1yi.js">
    <link rel="prefetch" href="/cours/assets/index.html-DNrA6HK6.js" as="script"><link rel="prefetch" href="/cours/assets/index.html-CXP878eB.js" as="script"><link rel="prefetch" href="/cours/assets/00-intro.html-Bk8UQcqp.js" as="script"><link rel="prefetch" href="/cours/assets/05-ftp.html-E0Ur07Av.js" as="script"><link rel="prefetch" href="/cours/assets/10-wordpress.html-7q_yRW6f.js" as="script"><link rel="prefetch" href="/cours/assets/20-git.html-ID_OUtqT.js" as="script"><link rel="prefetch" href="/cours/assets/21-github-pages.html-BgRPfY28.js" as="script"><link rel="prefetch" href="/cours/assets/30-symfony-angular.html-ChdxRAKi.js" as="script"><link rel="prefetch" href="/cours/assets/index.html-DYPvKtbL.js" as="script"><link rel="prefetch" href="/cours/assets/index.html-D32X3tpQ.js" as="script"><link rel="prefetch" href="/cours/assets/index.html-BB_fAsgA.js" as="script"><link rel="prefetch" href="/cours/assets/0-terminologie.html-DGfn3tkH.js" as="script"><link rel="prefetch" href="/cours/assets/1-before_start.html-C8oSeMYR.js" as="script"><link rel="prefetch" href="/cours/assets/2-init_local.html-CJ1oLmNZ.js" as="script"><link rel="prefetch" href="/cours/assets/3-record_changes.html-mTq4a0nY.js" as="script"><link rel="prefetch" href="/cours/assets/4-branches.html-CcALPmAX.js" as="script"><link rel="prefetch" href="/cours/assets/5-common-work.html-BuKBh4ba.js" as="script"><link rel="prefetch" href="/cours/assets/6-rollback.html-DCW2n4gz.js" as="script"><link rel="prefetch" href="/cours/assets/7-rewrite-history.html-CMox542w.js" as="script"><link rel="prefetch" href="/cours/assets/8-tools.html-dbbGRguW.js" as="script"><link rel="prefetch" href="/cours/assets/98-exercices.html-BdTaL4hu.js" as="script"><link rel="prefetch" href="/cours/assets/99-examples.html-C_ldXykC.js" as="script"><link rel="prefetch" href="/cours/assets/index.html-kzVuneS9.js" as="script"><link rel="prefetch" href="/cours/assets/1-bases.html-CGEYN-2D.js" as="script"><link rel="prefetch" href="/cours/assets/2-logique.html-61J_sYJu.js" as="script"><link rel="prefetch" href="/cours/assets/3-dom.html-BRsCseWv.js" as="script"><link rel="prefetch" href="/cours/assets/4-jquery.html-BToUe5Mr.js" as="script"><link rel="prefetch" href="/cours/assets/5-ajax.html-B4q0yYBG.js" as="script"><link rel="prefetch" href="/cours/assets/6-poo.html-DwJiHe1p.js" as="script"><link rel="prefetch" href="/cours/assets/90-webpack.html-DFKynxKS.js" as="script"><link rel="prefetch" href="/cours/assets/98-outils.html-dtYJRMDJ.js" as="script"><link rel="prefetch" href="/cours/assets/99-revisions.html-DPkBzUUG.js" as="script"><link rel="prefetch" href="/cours/assets/index.html-538Evebu.js" as="script"><link rel="prefetch" href="/cours/assets/index.html-DQl6xswL.js" as="script"><link rel="prefetch" href="/cours/assets/0-install.html-DLL9VTcs.js" as="script"><link rel="prefetch" href="/cours/assets/1-historique.html-DUZ9QH8s.js" as="script"><link rel="prefetch" href="/cours/assets/2-dossiers.html-C8OBAZKb.js" as="script"><link rel="prefetch" href="/cours/assets/3-processus.html-DkBAb6HO.js" as="script"><link rel="prefetch" href="/cours/assets/4-bases.html-BRpP6Qoh.js" as="script"><link rel="prefetch" href="/cours/assets/5-advanced.html-Z6iglftC.js" as="script"><link rel="prefetch" href="/cours/assets/6-other-technologies.html-BPMMqcd8.js" as="script"><link rel="prefetch" href="/cours/assets/98-exercices.html-DdGSvc_3.js" as="script"><link rel="prefetch" href="/cours/assets/99-corrections.html-B9a9jG4k.js" as="script"><link rel="prefetch" href="/cours/assets/index.html-CJUpZt3J.js" as="script"><link rel="prefetch" href="/cours/assets/00-environnement.html-eHcCWfO4.js" as="script"><link rel="prefetch" href="/cours/assets/01-bases.html-CEP22wx2.js" as="script"><link rel="prefetch" href="/cours/assets/02-tests-et-boucles.html-BJvaq02O.js" as="script"><link rel="prefetch" href="/cours/assets/03-fonctions.html-CySeJIXt.js" as="script"><link rel="prefetch" href="/cours/assets/04-user.html-BbC9tlnp.js" as="script"><link rel="prefetch" href="/cours/assets/05-temporisation-de-sortie.html-BprGTVyS.js" as="script"><link rel="prefetch" href="/cours/assets/10-doc.html-hbsDLq8X.js" as="script"><link rel="prefetch" href="/cours/assets/20-objet.html-tavW-9t-.js" as="script"><link rel="prefetch" href="/cours/assets/21-heritage.html-eZii40nq.js" as="script"><link rel="prefetch" href="/cours/assets/22-factorize.html-C_3OxGkX.js" as="script"><link rel="prefetch" href="/cours/assets/40-mvc.html-B7wW4tol.js" as="script"><link rel="prefetch" href="/cours/assets/50-rest.html-DA9kZAyq.js" as="script"><link rel="prefetch" href="/cours/assets/80-bases.html-DxX1aKvt.js" as="script"><link rel="prefetch" href="/cours/assets/81-multiple-files.html-DWDgT5CY.js" as="script"><link rel="prefetch" href="/cours/assets/82-post-session.html-CzHm_mUI.js" as="script"><link rel="prefetch" href="/cours/assets/83-cart-get-session.html-JZBhpCAK.js" as="script"><link rel="prefetch" href="/cours/assets/84-objects.html-CBCLsk4Q.js" as="script"><link rel="prefetch" href="/cours/assets/85-bdd-pdo.html-DLNT2Shx.js" as="script"><link rel="prefetch" href="/cours/assets/91-computer-preparation.html-04nylJYm.js" as="script"><link rel="prefetch" href="/cours/assets/92-jdr.html-PmXnWOug.js" as="script"><link rel="prefetch" href="/cours/assets/index.html-BCpYffRo.js" as="script"><link rel="prefetch" href="/cours/assets/01-installation.html-zMXAMdp5.js" as="script"><link rel="prefetch" href="/cours/assets/10-structure.html-BqkOypUB.js" as="script"><link rel="prefetch" href="/cours/assets/20-routing.html-DEmbotUh.js" as="script"><link rel="prefetch" href="/cours/assets/21-controllers.html-Dw-shP-A.js" as="script"><link rel="prefetch" href="/cours/assets/22-twig.html-BtHhS6Zz.js" as="script"><link rel="prefetch" href="/cours/assets/23-injection.html-FYyHm-3g.js" as="script"><link rel="prefetch" href="/cours/assets/24-doctrine.html-Dy9mTQaU.js" as="script"><link rel="prefetch" href="/cours/assets/25-formulaires.html-ClWG20Ye.js" as="script"><link rel="prefetch" href="/cours/assets/26-translation.html-Bx0CL1gK.js" as="script"><link rel="prefetch" href="/cours/assets/27-event-listeners.html-Cbzkc52t.js" as="script"><link rel="prefetch" href="/cours/assets/30-user.html-BqWDoicu.js" as="script"><link rel="prefetch" href="/cours/assets/40-bundles.html-CcDr5e5S.js" as="script"><link rel="prefetch" href="/cours/assets/41-easy-admin.html-D4Tpj4o2.js" as="script"><link rel="prefetch" href="/cours/assets/42-api-platform.html-BFrCkmar.js" as="script"><link rel="prefetch" href="/cours/assets/80-cheat-sheet.html-CqetZgPG.js" as="script"><link rel="prefetch" href="/cours/assets/81-quotidien.html-3aoij3Mw.js" as="script"><link rel="prefetch" href="/cours/assets/82-docker.html-DANOmWA1.js" as="script"><link rel="prefetch" href="/cours/assets/90-doggies.html-CF6BnQw2.js" as="script"><link rel="prefetch" href="/cours/assets/99-exercices.html-Hfy05qP_.js" as="script"><link rel="prefetch" href="/cours/assets/index.html-Cky5vnQE.js" as="script"><link rel="prefetch" href="/cours/assets/404.html-BBk7B_gA.js" as="script"><link rel="prefetch" href="/cours/assets/mermaid.esm.min-DlybqT7H.js" as="script"><link rel="prefetch" href="/cours/assets/prod-C3uXySb1.js" as="script"><link rel="prefetch" href="/cours/assets/prod-C3uXySb1.js" as="script"><link rel="prefetch" href="/cours/assets/vidstack-audio-DWxEHD26.js" as="script"><link rel="prefetch" href="/cours/assets/vidstack-video-BzoGie0P.js" as="script"><link rel="prefetch" href="/cours/assets/vidstack-hls-DfU-v-dq.js" as="script"><link rel="prefetch" href="/cours/assets/vidstack-dash-D54rnz3i.js" as="script"><link rel="prefetch" href="/cours/assets/vidstack-vimeo-BK2DV3IR.js" as="script"><link rel="prefetch" href="/cours/assets/vidstack-krOAtKMi-C3UUF7YD.js" as="script"><link rel="prefetch" href="/cours/assets/vidstack-youtube-DYOMeSWP.js" as="script"><link rel="prefetch" href="/cours/assets/vidstack-Zc3I7oOd-CA6XwpqT.js" as="script"><link rel="prefetch" href="/cours/assets/vidstack-CWDlegKy-CNXmzpVv.js" as="script"><link rel="prefetch" href="/cours/assets/vidstack-D0D6ufFF-BTjCMPz2.js" as="script"><link rel="prefetch" href="/cours/assets/vidstack-player-default-layout-uAtmJz4O.js" as="script"><link rel="prefetch" href="/cours/assets/vidstack-player-ui-3Hy2pYjc.js" as="script"><link rel="prefetch" href="/cours/assets/vidstack-QR8zGkwr-hi-wEx3g.js" as="script"><link rel="prefetch" href="/cours/assets/setupDevtools-7MC2TMWH-C80vdosD.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/cours/"><img class="vp-site-logo" src="/cours/assets/LogoHB2.png" alt="Cours de Rémi Jarjat"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Cours de Rémi Jarjat</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><!----><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/cours/" aria-label="Liste des cours"><!---->Liste des cours<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/cours/general/" aria-label="Culture numérique"><!---->Culture numérique<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading collapsible" href="/cours/git/" aria-label="Git"><!---->Git<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/cours/git/0-terminologie.html" aria-label="Terminologie"><!---->Terminologie<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/git/1-before_start.html" aria-label="Avant de commencer"><!---->Avant de commencer<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/git/2-init_local.html" aria-label="Créer un dépôt (local)"><!---->Créer un dépôt (local)<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/git/3-record_changes.html" aria-label="Enregistrer des changements"><!---->Enregistrer des changements<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/git/4-branches.html" aria-label="Des branches"><!---->Des branches<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/git/5-common-work.html" aria-label="Mise en commun du travail"><!---->Mise en commun du travail<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/git/6-rollback.html" aria-label="Annuler des changements"><!---->Annuler des changements<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/git/7-rewrite-history.html" aria-label="Réécrire l&#39;historique"><!---->Réécrire l&#39;historique<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/git/8-tools.html" aria-label="Des outils pour se simplifier Git"><!---->Des outils pour se simplifier Git<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/git/98-exercices.html" aria-label="Exercices"><!---->Exercices<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/git/99-examples.html" aria-label="Exemples pratiques"><!---->Exemples pratiques<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading collapsible" href="/cours/linux/" aria-label="Linux"><!---->Linux<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/cours/linux/0-install.html" aria-label="Installation"><!---->Installation<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/linux/1-historique.html" aria-label="Historique"><!---->Historique<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/linux/2-dossiers.html" aria-label="Rangement des fichiers"><!---->Rangement des fichiers<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/linux/3-processus.html" aria-label="Les processus"><!---->Les processus<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/linux/4-bases.html" aria-label="Commandes de base"><!---->Commandes de base<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/linux/5-advanced.html" aria-label="Commandes avancées"><!---->Commandes avancées<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/linux/6-other-technologies.html" aria-label="/linux/6-other-technologies.html"><!---->/linux/6-other-technologies.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/linux/98-exercices.html" aria-label="Exercices"><!---->Exercices<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/linux/99-corrections.html" aria-label="Correction des exercices"><!---->Correction des exercices<!----></a><!----></li><!--]--></ul></li><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading active collapsible" href="/cours/php/" aria-label="PHP"><!---->PHP<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/00-environnement.html" aria-label="Environnement de travail"><!---->Environnement de travail<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/01-bases.html" aria-label="Bases du PHP"><!---->Bases du PHP<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/02-tests-et-boucles.html" aria-label="Tests et boucles"><!---->Tests et boucles<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/03-fonctions.html" aria-label="Procédures et fonctions"><!---->Procédures et fonctions<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/04-user.html" aria-label="Interagir avec l&#39;utilisateur"><!---->Interagir avec l&#39;utilisateur<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/05-temporisation-de-sortie.html" aria-label="La temporisation de sortie"><!---->La temporisation de sortie<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/10-doc.html" aria-label="PHP Doc et PSR"><!---->PHP Doc et PSR<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/20-objet.html" aria-label="PHP Orienté objet"><!---->PHP Orienté objet<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/21-heritage.html" aria-label="Héritage et objets"><!---->Héritage et objets<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/22-factorize.html" aria-label="Factorisation"><!---->Factorisation<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/cours/php/30-pdo.html" aria-label="Manipuler la BdD avec PDO (PHP Data Object)"><!---->Manipuler la BdD avec PDO (PHP Data Object)<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/40-mvc.html" aria-label="Architecture MVC"><!---->Architecture MVC<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/50-rest.html" aria-label="Webservices REST"><!---->Webservices REST<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/80-bases.html" aria-label="Exercices - Bases"><!---->Exercices - Bases<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/81-multiple-files.html" aria-label="Exercices - Séparer en plusieurs fichiers"><!---->Exercices - Séparer en plusieurs fichiers<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/82-post-session.html" aria-label="Exercices - POST et SESSION"><!---->Exercices - POST et SESSION<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/83-cart-get-session.html" aria-label="Exercices - Panier et validation"><!---->Exercices - Panier et validation<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/84-objects.html" aria-label="Exercices - Objets"><!---->Exercices - Objets<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/85-bdd-pdo.html" aria-label="Exercices - BdD avec PDO"><!---->Exercices - BdD avec PDO<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/91-computer-preparation.html" aria-label="Projet - montage d&#39;ordinateurs"><!---->Projet - montage d&#39;ordinateurs<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/php/92-jdr.html" aria-label="Projet - Personnages de Jeux de Rôle"><!---->Projet - Personnages de Jeux de Rôle<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading collapsible" href="/cours/symfony/" aria-label="Symfony"><!---->Symfony<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/01-installation.html" aria-label="Installer Symfony et son environnement de travail"><!---->Installer Symfony et son environnement de travail<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/10-structure.html" aria-label="Structure et utilisation d&#39;un projet"><!---->Structure et utilisation d&#39;un projet<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/20-routing.html" aria-label="Le routing"><!---->Le routing<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/21-controllers.html" aria-label="Les controllers"><!---->Les controllers<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/22-twig.html" aria-label="Twig"><!---->Twig<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/23-injection.html" aria-label="Les services et l&#39;injection de dépendances"><!---->Les services et l&#39;injection de dépendances<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/24-doctrine.html" aria-label="Doctrine et la BdD"><!---->Doctrine et la BdD<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/25-formulaires.html" aria-label="Formulaires"><!---->Formulaires<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/26-translation.html" aria-label="Les traductions"><!---->Les traductions<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/27-event-listeners.html" aria-label="Event listeners/subscribers"><!---->Event listeners/subscribers<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/30-user.html" aria-label="Connexion et sécurisation"><!---->Connexion et sécurisation<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/40-bundles.html" aria-label="Bundles"><!---->Bundles<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/41-easy-admin.html" aria-label="Easy Admin Bundle"><!---->Easy Admin Bundle<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/42-api-platform.html" aria-label="API Platform"><!---->API Platform<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/80-cheat-sheet.html" aria-label="Pense-bêtes"><!---->Pense-bêtes<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/81-quotidien.html" aria-label="Symfony au quotidien"><!---->Symfony au quotidien<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/82-docker.html" aria-label="Travailler avec Docker"><!---->Travailler avec Docker<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/90-doggies.html" aria-label="Projet : annonces de SPA / éleveurs"><!---->Projet : annonces de SPA / éleveurs<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/symfony/99-exercices.html" aria-label="Exercices"><!---->Exercices<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading collapsible" href="/cours/js/" aria-label="Javascript"><!---->Javascript<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/cours/js/1-bases.html" aria-label="Les bases du langage"><!---->Les bases du langage<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/js/2-logique.html" aria-label="Manipulation logique"><!---->Manipulation logique<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/js/3-dom.html" aria-label="Le DOM"><!---->Le DOM<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/js/4-jquery.html" aria-label="JQuery"><!---->JQuery<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/js/5-ajax.html" aria-label="Ajax"><!---->Ajax<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/js/6-poo.html" aria-label="Programmation orientée objet"><!---->Programmation orientée objet<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/js/90-webpack.html" aria-label="Webpack"><!---->Webpack<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/js/98-outils.html" aria-label="Outils utiles"><!---->Outils utiles<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/js/99-revisions.html" aria-label="Révisions"><!---->Révisions<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/cours/lamp/" aria-label="Serveur Lamp"><!---->Serveur Lamp<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading collapsible" href="/cours/deploy/" aria-label="Déploiement"><!---->Déploiement<!----></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/cours/deploy/00-intro.html" aria-label="Des outils et manières de faire"><!---->Des outils et manières de faire<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/deploy/05-ftp.html" aria-label="Déploiement par FTP"><!---->Déploiement par FTP<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/deploy/10-wordpress.html" aria-label="Wordpress"><!---->Wordpress<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/deploy/20-git.html" aria-label="Intégrer Git dans le processus"><!---->Intégrer Git dans le processus<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/deploy/21-github-pages.html" aria-label="GitHub Pages pour déployer facilement"><!---->GitHub Pages pour déployer facilement<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cours/deploy/30-symfony-angular.html" aria-label="Symfony et Angular"><!---->Symfony et Angular<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/cours/docker/" aria-label="Docker"><!---->Docker<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/cours/ci/" aria-label="Intégration continue"><!---->Intégration continue<!----></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="manipuler-la-bdd-avec-pdo-php-data-object" tabindex="-1"><a class="header-anchor" href="#manipuler-la-bdd-avec-pdo-php-data-object"><span>Manipuler la BdD avec PDO (PHP Data Object)</span></a></h1><nav class="table-of-contents"><ul><li><a aria-current="page" href="/cours/php/30-pdo.html#l-extension-pdo" class="router-link-active router-link-exact-active">L&#39;extension PDO</a></li><li><a aria-current="page" href="/cours/php/30-pdo.html#se-connecter-a-la-base" class="router-link-active router-link-exact-active">Se connecter à la base</a></li><li><a aria-current="page" href="/cours/php/30-pdo.html#gerer-les-erreurs" class="router-link-active router-link-exact-active">Gérer les erreurs</a></li><li><a aria-current="page" href="/cours/php/30-pdo.html#requetes-directes" class="router-link-active router-link-exact-active">Requêtes directes</a><ul><li><a aria-current="page" href="/cours/php/30-pdo.html#pdo-query" class="router-link-active router-link-exact-active">PDO::query()</a></li><li><a aria-current="page" href="/cours/php/30-pdo.html#pdo-exec" class="router-link-active router-link-exact-active">PDO::exec()</a></li><li><a aria-current="page" href="/cours/php/30-pdo.html#quelques-exemples-en-video" class="router-link-active router-link-exact-active">Quelques exemples en vidéo</a></li></ul></li><li><a aria-current="page" href="/cours/php/30-pdo.html#les-requetes-preparees" class="router-link-active router-link-exact-active">Les requêtes préparées</a><ul><li><a aria-current="page" href="/cours/php/30-pdo.html#pdostatement" class="router-link-active router-link-exact-active">PDOStatement</a></li><li><a aria-current="page" href="/cours/php/30-pdo.html#les-marqueurs-de-positionnement" class="router-link-active router-link-exact-active">Les marqueurs de positionnement</a></li><li><a aria-current="page" href="/cours/php/30-pdo.html#les-parametres-nommes" class="router-link-active router-link-exact-active">Les paramètres nommés</a></li></ul></li><li><a aria-current="page" href="/cours/php/30-pdo.html#recuperer-l-identifiant-du-dernier-element-enregistre" class="router-link-active router-link-exact-active">Récupérer l&#39;identifiant du dernier élément enregistré</a></li><li><a aria-current="page" href="/cours/php/30-pdo.html#remplir-des-objets-avec-nos-donnees" class="router-link-active router-link-exact-active">Remplir des objets avec nos données</a></li><li><a aria-current="page" href="/cours/php/30-pdo.html#exercices" class="router-link-active router-link-exact-active">Exercices</a></li></ul></nav><h2 id="l-extension-pdo" tabindex="-1"><a class="header-anchor" href="#l-extension-pdo"><span>L&#39;extension PDO</span></a></h2><p><a href="https://www.php.net/manual/fr/book.pdo.php" target="_blank" rel="noopener noreferrer">La documentation sur PDO</a></p><div style="position:relative;padding-bottom:56.25%;height:0;"><iframe src="https://www.loom.com/embed/fc75e45d8a0c48b8bb3f487febb136bc" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;"></iframe></div><p>PDO est une extension de PHP, permettant la gestion de la <abbr title="Base de Données">BdD</abbr> (connexion et utilisation de requêtes SQL pour créer/modifier les données).</p><p>Il offre différentes fonctionnalités, dont :</p><ul><li>des requêtes préparées, pour améliorer la sécurité et les performances</li><li>des transactions, pour exécuter un ensemble de requête, uniquement si <strong>toutes</strong> fonctionnent (sinon aucune donnée n&#39;est ajoutée/modifiée)</li></ul><p>PDO sert de base à de nombreux <abbr title="Object-Relational Mapping">ORM</abbr>, tels que Doctrine, que vous verrez dans <a class="route-link" href="/cours/symfony/">la partie consacrée à Symfony</a>.</p><p>On peut l&#39;utiliser avec les <abbr title="Système de Gestion de Base de Données">SGBD</abbr> suivants (entre autre) :</p><ul><li>Mysql (l&#39;un des plus courants)</li><li>PostgreSQL (une excellente référence)</li><li>Oracle</li><li>et bien d&#39;autres</li></ul><p>Dans les faits, PDO offre des classes pour gérer :</p><ul><li>la connexion à la BdD</li><li>la préparation et l&#39;envoi de requêtes SQL</li><li>la gestion des transactions</li></ul><h2 id="se-connecter-a-la-base" tabindex="-1"><a class="header-anchor" href="#se-connecter-a-la-base"><span>Se connecter à la base</span></a></h2><div style="position:relative;padding-bottom:56.25%;height:0;"><iframe src="https://www.loom.com/embed/6b42ca476091438eb83254eea75cd2ae" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;"></iframe></div><p>PDO fournit un objet (<code>PDO</code>) de connexion à la BdD, que l&#39;on va utiliser pour faire ensuite nos requêtes. On en crée en général une instance, que l&#39;on inclue dans nos autres scripts, pour faire des requêtes. Cet objet peut renvoyer une exception, pour vous permettre de détecter les problèmes de connexion dès que possible.</p><p>Pour se connecter, on crée (en général), un fichier spécifique, qu&#39;on appelle sur nos pages (par exemple <code>includes/db.inc.php</code>)</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span></span>
<span class="line"><span class="token comment">// Ici, adapter les valeurs de dbname et port à votre configuration</span></span>
<span class="line"><span class="token comment">// dbname contient le nom de la BdD à utiliser</span></span>
<span class="line"><span class="token comment">// port est le port à utiliser (3306 par défaut)</span></span>
<span class="line"><span class="token comment">// host est le nom d&#39;hôte de notre serveur de BdD</span></span>
<span class="line"><span class="token comment">// (127.0.0.1 ou localhost, les deux sont équivalents)</span></span>
<span class="line"><span class="token variable">$dsn</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;mysql:dbname=cours;port=3306;host=127.0.0.1&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;root&#39;</span><span class="token punctuation">;</span> <span class="token comment">// Utilisateur par défaut</span></span>
<span class="line"><span class="token variable">$password</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">;</span> <span class="token comment">// Par défaut, pas de mot de passe sur Wamp</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Try nous permet d&#39;attraper une exception</span></span>
<span class="line"><span class="token comment">// catch (il peut y en avoir plusieurs) d&#39;exécuter d&#39;autres instructions </span></span>
<span class="line"><span class="token comment">// quand une erreur de type PDOException est levée</span></span>
<span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// On crée une connexion (objet PDO) à norte BdD,</span></span>
<span class="line">    <span class="token comment">// nous pourrons nous en servir dans la suite du programme</span></span>
<span class="line">    <span class="token variable">$connection</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PDO</span><span class="token punctuation">(</span><span class="token variable">$dsn</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$password</span><span class="token punctuation">,</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token comment">// Définition du mode d&#39;erreur : on renvoie une exception </span></span>
<span class="line">        <span class="token comment">// dès qu&#39;une erreur se produit dans les requêtes</span></span>
<span class="line">        <span class="token class-name static-context">PDO</span><span class="token operator">::</span><span class="token constant">ATTR_ERRMODE</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">PDO</span><span class="token operator">::</span><span class="token constant">ERRMODE_EXCEPTION</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token comment">// On définit sous quel format on récupère les données de la base</span></span>
<span class="line">        <span class="token comment">// On peut les récupérer sous la forme :</span></span>
<span class="line">        <span class="token comment">// - D&#39;un tableau associatif avec PDO::FETCH_ASSOC</span></span>
<span class="line">        <span class="token comment">// - D&#39;un objet avec PDO::FETCH_OBJ</span></span>
<span class="line">        <span class="token comment">// - D&#39;un objet utilisant une de vos classes avec PDO::FETCH_CLASS</span></span>
<span class="line">        <span class="token comment">// - D&#39;injections dans un objet avec PDO::FETCH_INTO</span></span>
<span class="line">        <span class="token class-name static-context">PDO</span><span class="token operator">::</span><span class="token constant">ATTR_DEFAULT_FETCH_MODE</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">PDO</span><span class="token operator">::</span><span class="token constant">FETCH_ASSOC</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">PDOException</span> <span class="token variable">$e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">exit</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Connexion échouée : &#39;</span> <span class="token operator">.</span> <span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="gerer-les-erreurs" tabindex="-1"><a class="header-anchor" href="#gerer-les-erreurs"><span>Gérer les erreurs</span></a></h2><ul><li>La <a href="https://www.php.net/manual/fr/class.pdoexception.php" target="_blank" rel="noopener noreferrer">documentation officielle sur la classe PDOException</a></li><li>Le <a href="https://www.php.net/manual/fr/language.exceptions.php" target="_blank" rel="noopener noreferrer">chapitre de la documentation sur les exceptions</a></li></ul><div style="position:relative;padding-bottom:56.25%;height:0;"><iframe src="https://www.loom.com/embed/2d1b828fb9a744bc9b82fc2f718ce6bc" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;"></iframe></div><p>Dans la connexion, vous allez principalement avoir un seul type d&#39;exception <code>PDOException</code>, mais vous pourriez récupérer d&#39;autres types d&#39;exception si vous le souhaitiez :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$dsn</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;mysql:dbname=cours;host=127.0.0.1&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;root&#39;</span><span class="token punctuation">;</span> <span class="token comment">// Utilisateur par défaut</span></span>
<span class="line"><span class="token variable">$password</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">;</span> <span class="token comment">// Par défaut, pas de mot de passe sur Wamp</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token variable">$connection</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PDO</span><span class="token punctuation">(</span><span class="token variable">$dsn</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$password</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">PDOException</span> <span class="token variable">$e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">echo</span> <span class="token string single-quoted-string">&#39;Connexion échouée : &#39;</span> <span class="token operator">.</span> <span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> <span class="token variable">$e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">echo</span> <span class="token string single-quoted-string">&#39;Connexion échouée : &#39;</span> <span class="token operator">.</span> <span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Lorsque vous exécutez des requêtes avec PDO, des exceptions peuvent être levées. De la même manière que pour la connexion à la <abbr title="Base de Données">BdD</abbr>, vous pouvez utiliser un bloc try-catch pour gérer l&#39;erreur (ou laisser l&#39;erreur se produire et arrêter votre programme, selon les cas).</p><h2 id="requetes-directes" tabindex="-1"><a class="header-anchor" href="#requetes-directes"><span>Requêtes directes</span></a></h2><div style="position:relative;padding-bottom:56.25%;height:0;"><iframe src="https://www.loom.com/embed/7b8de596a0bc4ebc82152e05a11ac467" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;"></iframe></div><h3 id="pdo-query" tabindex="-1"><a class="header-anchor" href="#pdo-query"><span>PDO::query()</span></a></h3><p>Utilisée pour les requêtes <code>SELECT</code> :</p><ul><li>Prend en paramètre une requête (dans une variable <code>$sql</code> dans la suite)</li><li>S&#39;appelle sur notre connexion : <code>$connection-&gt;query($sql)</code></li><li>Renvoie un objet <code>PDOStatement</code> (contenant une méthode <code>fetchAll()</code>, renvoyant un tableau <strong>associatif</strong> avec les différentes lignes)</li></ul><p>Un exemple complet :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token comment">// On crée notre requête, en prenant soin qu&#39;elle soit valide (tester dans PhpMyAdmin, par exemple)</span></span>
<span class="line"><span class="token variable">$sql</span> <span class="token operator">=</span>  <span class="token string single-quoted-string">&#39;SELECT id, fullname, date FROM student ORDER BY fullname&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// On appelle notre objet PDO ($connection)</span></span>
<span class="line"><span class="token comment">// et on utilise sa méthode query() pour exécuter notre requête</span></span>
<span class="line"><span class="token comment">// On récupère un objet PDOStatement qui va nous permettre de recevoir nos résultats</span></span>
<span class="line"><span class="token comment">// Si une erreur est survenue (requête invalide), query() lève une exception</span></span>
<span class="line"><span class="token variable">$statement</span> <span class="token operator">=</span> <span class="token variable">$connection</span><span class="token operator">-&gt;</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Si on souhaite récupérer tous nos résultats dans un tableau associatif,</span></span>
<span class="line"><span class="token comment">// on utilise fetchAll() </span></span>
<span class="line"><span class="token variable">$results</span> <span class="token operator">=</span> <span class="token variable">$statement</span><span class="token operator">-&gt;</span><span class="token function">fetchAll</span><span class="token punctuation">(</span><span class="token class-name static-context">PDO</span><span class="token operator">::</span><span class="token constant">FETCH_COLUMN</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// On parcourt nos résultats</span></span>
<span class="line"><span class="token keyword">foreach</span>  <span class="token punctuation">(</span><span class="token variable">$results</span> <span class="token keyword">as</span> <span class="token variable">$result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="pdo-exec" tabindex="-1"><a class="header-anchor" href="#pdo-exec"><span>PDO::exec()</span></a></h3><p>Utilisée pour les requêtes autres que <code>SELECT</code> :</p><ul><li>Prend en paramètre une requête (dans une variable <code>$sql</code> dans la suite)</li><li>S&#39;appelle sur notre connexion : <code>$connection-&gt;exec($sql)</code></li><li>Renvoie le <strong>nombre</strong> de lignes affectées</li></ul><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token comment">// On écrit une requête, où on insère 3 éléments</span></span>
<span class="line"><span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;INSERT INTO `student`(`fullname`) VALUES (&#39;Rémi Jarjat&#39;), (&#39;Jean-Claude Duss&#39;), (&#39;Marc-André du Gaz de Schiste&#39;)&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// On l&#39;exécute et on récupère le nombre de lignes mises à jour</span></span>
<span class="line"><span class="token variable">$count</span> <span class="token operator">=</span> <span class="token variable">$connection</span><span class="token operator">-&gt;</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"><span class="token comment">// $count contient 3 (ou une exception est levée en cas d&#39;erreur)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// On met à jour tous les éléments de notre table student</span></span>
<span class="line"><span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;UPDATE student SET date = NOW()&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// Si une erreur s&#39;est produite, exec() renvoie une exception</span></span>
<span class="line"><span class="token variable">$count</span> <span class="token operator">=</span> <span class="token variable">$connection</span><span class="token operator">-&gt;</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"><span class="token comment">// $count contient également 3 (on modifie toutes les lignes)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="quelques-exemples-en-video" tabindex="-1"><a class="header-anchor" href="#quelques-exemples-en-video"><span>Quelques exemples en vidéo</span></a></h3><div style="position:relative;padding-bottom:56.25%;height:0;"><iframe src="https://www.loom.com/embed/2d438dae5ffc49abb7728848adc61376" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;"></iframe></div><h2 id="les-requetes-preparees" tabindex="-1"><a class="header-anchor" href="#les-requetes-preparees"><span>Les requêtes préparées</span></a></h2><p>Une requête préparée permet d&#39;exécuter une requête complexe, d&#39;en simplifier l&#39;écriture (surtout pour les requêtes avec paramètres) et d&#39;éviter les erreurs tant d&#39;écriture que d&#39;injection SQL (sécurisation des données). Une requête préparée sera exécutée plus vite, si elle est appelée plusieurs fois. Personnellement, je préfère préparer toutes mes requêtes, pour simplifier leur écriture et éviter de concaténer des chaînes de caractères.</p><h3 id="pdostatement" tabindex="-1"><a class="header-anchor" href="#pdostatement"><span>PDOStatement</span></a></h3><p><a href="https://www.php.net/manual/fr/class.pdostatement.php" target="_blank" rel="noopener noreferrer">La documentation officielle</a></p><p>Cet objet intermédiaire va nous permettre de préparer les requêtes, afin de les optimiser et de réduire certaines répétitions de code.</p><p>Un squelette minimal :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token comment">// On prépare une requête, que l&#39;on va exécuter plus tard</span></span>
<span class="line"><span class="token doc-comment comment">/** <span class="token keyword">@var</span> <span class="token class-name">PDOStatement</span> <span class="token parameter">$statement</span> */</span></span>
<span class="line"><span class="token variable">$statement</span> <span class="token operator">=</span> <span class="token variable">$connection</span><span class="token operator">-&gt;</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// On peut lui passer des paramètres directement au moment de l&#39;exécution.</span></span>
<span class="line"><span class="token comment">// Nous allons utiliser la méthode bindParam() pour des exécutions dans des boucles</span></span>
<span class="line"><span class="token comment">// ou avec un tableau en paramètre pour une requête unique</span></span>
<span class="line"><span class="token variable">$statement</span><span class="token operator">-&gt;</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token variable">$parameters</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Si la requête a réussi, on peut récupérer les résultats</span></span>
<span class="line"><span class="token doc-comment comment">/** <span class="token keyword">@var</span> <span class="token class-name"><span class="token keyword">array</span></span> <span class="token parameter">$results</span> */</span></span>
<span class="line"><span class="token variable">$results</span> <span class="token operator">=</span> <span class="token variable">$statement</span><span class="token operator">-&gt;</span><span class="token function">fetchAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="les-marqueurs-de-positionnement" tabindex="-1"><a class="header-anchor" href="#les-marqueurs-de-positionnement"><span>Les marqueurs de positionnement</span></a></h3><ul><li>Pour lier des paramètres (variables PHP) à une requête</li><li>Les paramètres sont simplement numérotés</li></ul><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token comment">// la méthode bindValue() attend une valeur en second paramètre (qu&#39;elle soit dans une variable ou non, peu importe).</span></span>
<span class="line"><span class="token variable">$statement</span> <span class="token operator">=</span> <span class="token variable">$connection</span><span class="token operator">-&gt;</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;SELECT fullname FROM student WHERE fullname LIKE ?&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// Attention, la numérotation des paramètres commence à 1, pas à 0</span></span>
<span class="line"><span class="token variable">$statement</span><span class="token operator">-&gt;</span><span class="token function">bindValue</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;Test&quot;</span><span class="token punctuation">,</span> <span class="token class-name static-context">PDO</span><span class="token operator">::</span><span class="token constant">PARAM_STR</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$statement</span><span class="token operator">-&gt;</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>L&#39;exemple ci-dessus est équivalent à :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token comment">// la méthode bindParam() attend une variable en second paramètre (passage par référence).</span></span>
<span class="line"><span class="token comment">// Lui donner une valeur directement provoque une erreur.</span></span>
<span class="line"><span class="token variable">$param</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;Test&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$statement</span> <span class="token operator">=</span> <span class="token variable">$connection</span><span class="token operator">-&gt;</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;SELECT fullname FROM student WHERE fullname LIKE ?&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// Attention, la numérotation des paramètres commence à 1, pas à 0</span></span>
<span class="line"><span class="token variable">$statement</span><span class="token operator">-&gt;</span><span class="token function">bindParam</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token variable">$param</span><span class="token punctuation">,</span> <span class="token class-name static-context">PDO</span><span class="token operator">::</span><span class="token constant">PARAM_STR</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$statement</span><span class="token operator">-&gt;</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>L&#39;exemple ci-dessus est équivalent à :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$statement</span> <span class="token operator">=</span> <span class="token variable">$connection</span><span class="token operator">-&gt;</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;SELECT fullname FROM student WHERE fullname LIKE ?&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$statement</span><span class="token operator">-&gt;</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">    <span class="token string double-quoted-string">&quot;Test&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>L&#39;un des grands avantages des requêtes préparées est l&#39;utilisation dans des boucles :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$param</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;Test&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$statement</span> <span class="token operator">=</span> <span class="token variable">$connection</span><span class="token operator">-&gt;</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;INSERT INTO student (fullname) VALUES (?)&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$statement</span><span class="token operator">-&gt;</span><span class="token function">bindParam</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token variable">$param</span><span class="token punctuation">,</span> <span class="token class-name static-context">PDO</span><span class="token operator">::</span><span class="token constant">PARAM_STR</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// À chaque exécution de la boucle, le contenu de $param va être changé</span></span>
<span class="line"><span class="token comment">// et on insère la donnée modifiée au fur et à mesure</span></span>
<span class="line"><span class="token comment">// (le contenu de $param est lu à chaque itération, grâce à bindParam)</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token variable">$i</span> <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token variable">$param</span> <span class="token operator">.=</span> <span class="token variable">$i</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token variable">$statement</span><span class="token operator">-&gt;</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>⚠️ En général, on va utiliser <code>bindValue()</code>, <code>bindParam()</code> ne sert que dans <strong>quelques cas spécifiques</strong>.</p><h3 id="les-parametres-nommes" tabindex="-1"><a class="header-anchor" href="#les-parametres-nommes"><span>Les paramètres nommés</span></a></h3><ul><li>Pour lier des paramètres (variables PHP) à une requête</li><li>Les paramètres sont nommés, permettant de les repérer plus facilement</li><li>Un paramètre commence toujours par <code>:</code> suivi d&#39;un nom</li></ul><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$statement</span> <span class="token operator">=</span> <span class="token variable">$connection</span><span class="token operator">-&gt;</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;INSERT INTO student (fullname) VALUES (:name)&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// Notre paramètre :name sera remplacé par la valeur de $param, à l&#39;exécution de la requête</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token variable">$i</span> <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token variable">$statement</span><span class="token operator">-&gt;</span><span class="token function">bindValue</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;:name&#39;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;Test&quot;</span><span class="token operator">.</span><span class="token variable">$i</span><span class="token punctuation">,</span> <span class="token class-name static-context">PDO</span><span class="token operator">::</span><span class="token constant">PARAM_STR</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token variable">$statement</span><span class="token operator">-&gt;</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>L&#39;exemple ci-dessus est équivalent à :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$statement</span> <span class="token operator">=</span> <span class="token variable">$connection</span><span class="token operator">-&gt;</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;INSERT INTO student (fullname) VALUES (:name)&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// Notre paramètre :name sera remplacé par la valeur de $param, à l&#39;exécution de la requête</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token variable">$i</span> <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token variable">$param</span> <span class="token operator">.=</span> <span class="token variable">$i</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token variable">$statement</span><span class="token operator">-&gt;</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">        <span class="token comment">// Ici les : ne sont pas obligatoires</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;:name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Test&#39;</span><span class="token operator">.</span><span class="token variable">$i</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="exemples-concrets" tabindex="-1"><a class="header-anchor" href="#exemples-concrets"><span>Exemples concrets</span></a></h4><p>Un exemple d&#39;une requête préparée, insérant un tableau de données dans une table <code>contact</code></p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;INSERT INTO contact (subject, message, email) VALUES (:subject, :message, :email)&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$pdoStatement</span> <span class="token operator">=</span> <span class="token variable">$connection</span><span class="token operator">-&gt;</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$contacts</span> <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;subject&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Test&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;message&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Un message de test super long !&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;email&#39;</span>   <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;test@test.com&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;subject&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Test2&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;message&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Un message de test2 super long !&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;email&#39;</span>   <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;test2@test.com&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;subject&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Test3&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;message&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Un message de test3 super long !&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;email&#39;</span>   <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;test3@test.com&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;subject&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Test4&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;message&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Un message de test4 super long !&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;email&#39;</span>   <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;test4@test.com&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;subject&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Test5&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;message&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Un message de test5 super long !&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;email&#39;</span>   <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;test5@test.com&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$contacts</span> <span class="token keyword">as</span> <span class="token variable">$contact</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token variable">$pdoStatement</span><span class="token operator">-&gt;</span><span class="token function">bindValue</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;:subject&#39;</span><span class="token punctuation">,</span> <span class="token variable">$contact</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;subject&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token variable">$pdoStatement</span><span class="token operator">-&gt;</span><span class="token function">bindValue</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;:message&#39;</span><span class="token punctuation">,</span> <span class="token variable">$contact</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;message&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token variable">$pdoStatement</span><span class="token operator">-&gt;</span><span class="token function">bindValue</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;:email&#39;</span><span class="token punctuation">,</span> <span class="token variable">$contact</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;email&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token variable">$count</span> <span class="token operator">=</span> <span class="token variable">$pdoStatement</span><span class="token operator">-&gt;</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$count</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>La même chose, sans l&#39;appel à <code>bindParam()</code> ou <code>bindValue()</code> :</p><p>⚠️ Notez que l&#39;écriture est plus courte, mais la vérification des données est moins efficace.</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;INSERT INTO contact (subject, message, email) VALUES (:subject, :message, :email)&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$pdoStatement</span> <span class="token operator">=</span> <span class="token variable">$connection</span><span class="token operator">-&gt;</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$contacts</span> <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;subject&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Test&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;message&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Un message de test super long !&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;email&#39;</span>   <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;test@test.com&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;subject&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Test2&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;message&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Un message de test2 super long !&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;email&#39;</span>   <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;test2@test.com&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;subject&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Test3&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;message&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Un message de test3 super long !&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;email&#39;</span>   <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;test3@test.com&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;subject&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Test4&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;message&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Un message de test4 super long !&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;email&#39;</span>   <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;test4@test.com&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;subject&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Test5&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;message&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Un message de test5 super long !&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;email&#39;</span>   <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;test5@test.com&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$contacts</span> <span class="token keyword">as</span> <span class="token variable">$contact</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token variable">$count</span> <span class="token operator">=</span> <span class="token variable">$pdoStatement</span><span class="token operator">-&gt;</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;:subject&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$contact</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;subject&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;:message&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$contact</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;message&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;:email&#39;</span>   <span class="token operator">=&gt;</span> <span class="token variable">$contact</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;email&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$count</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Un exemple de récupération de données :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;SELECT * FROM contact&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$pdoStatement</span> <span class="token operator">=</span> <span class="token variable">$connection</span><span class="token operator">-&gt;</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$success</span> <span class="token operator">=</span> <span class="token variable">$pdoStatement</span><span class="token operator">-&gt;</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$results</span> <span class="token operator">=</span> <span class="token variable">$pdoStatement</span><span class="token operator">-&gt;</span><span class="token function">fetchAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">exit</span><span class="token punctuation">(</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$results</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Un exemple avec utilisation de <code>fetch()</code> :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;SELECT * FROM contact&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$pdoStatement</span> <span class="token operator">=</span> <span class="token variable">$connection</span><span class="token operator">-&gt;</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$isDone</span> <span class="token operator">=</span> <span class="token variable">$pdoStatement</span><span class="token operator">-&gt;</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$pdoStatement</span><span class="token operator">-&gt;</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="recuperer-l-identifiant-du-dernier-element-enregistre" tabindex="-1"><a class="header-anchor" href="#recuperer-l-identifiant-du-dernier-element-enregistre"><span>Récupérer l&#39;identifiant du dernier élément enregistré</span></a></h2><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$stmt</span> <span class="token operator">=</span> <span class="token variable">$connection</span><span class="token operator">-&gt;</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;INSERT INTO truc (bidule, machin) VALUES(:bidule, :machin)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$isDone</span> <span class="token operator">=</span> <span class="token variable">$stmt</span><span class="token operator">-&gt;</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Ici, on récupère l&#39;id du dernier élément inséré dans la table truc </span></span>
<span class="line"><span class="token variable">$id</span> <span class="token operator">=</span> <span class="token variable">$connection</span><span class="token operator">-&gt;</span><span class="token function">lastInsertId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="remplir-des-objets-avec-nos-donnees" tabindex="-1"><a class="header-anchor" href="#remplir-des-objets-avec-nos-donnees"><span>Remplir des objets avec nos données</span></a></h2><div style="position:relative;padding-bottom:56.25%;height:0;"><iframe src="https://www.loom.com/embed/42852fca3e194ec9a5658009e3a87dd7" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;"></iframe></div><p>Avec PDO, vous pouvez remplir directement vos objets avec les constantes <code>PDO::FETCH_CLASS</code> ou <code>PDO::FETCH_INTO</code>. Dans les deux cas, votre objet PHP sera rempli avec les données récupérées en base ! Le premier crée une instance de la classe demandée, quoiqu&#39;il arrive. Le second met à jour une instance existante.</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">require_once</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;classes/User.php&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$sth</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-&gt;</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;SELECT * FROM user WHERE id = 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// On demande à PDO de nous créer un User</span></span>
<span class="line"><span class="token comment">// avec ce qu&#39;il va récupérer en BdD</span></span>
<span class="line"><span class="token variable">$sth</span><span class="token operator">-&gt;</span><span class="token function">setFetchMode</span><span class="token punctuation">(</span> <span class="token class-name static-context">PDO</span><span class="token operator">::</span><span class="token constant">FETCH_CLASS</span><span class="token punctuation">,</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$sth</span><span class="token operator">-&gt;</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// On a une nouvelle instance de notre classe User</span></span>
<span class="line"><span class="token comment">// avec ses données remplies.</span></span>
<span class="line"><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token variable">$sth</span><span class="token operator">-&gt;</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$sth</span><span class="token operator">-&gt;</span><span class="token function">setFetchMode</span><span class="token punctuation">(</span> <span class="token class-name static-context">PDO</span><span class="token operator">::</span><span class="token constant">FETCH_INTO</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$sth</span><span class="token operator">-&gt;</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// On a rempli les données de notre user</span></span>
<span class="line"><span class="token comment">// à partir des données en base.</span></span>
<span class="line"><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token variable">$sth</span><span class="token operator">-&gt;</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>⚠️ <code>PDO::FETCH_CLASS</code> appelle le constructeur <strong>après</strong> avoir rempli les données de l&#39;objet.</p><p>Pour utiliser les termes de la documentation :</p><blockquote><p>Lorsque des objets sont récupérés via PDO::FETCH_CLASS, les propriétés de l&#39;objet sont assignées en premier, puis le constructeur de la classe est appelé. Si PDO::FETCH_PROPS_LATE est également donné, cet ordre est inversé, c&#39;est-à-dire d&#39;abord le constructeur est appelé, et ensuite les propriétés sont assignées.</p></blockquote><p>Si cela pose problème, vous pouvez ajouter un drapeau (flag) supplémentaire :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token comment">// On peut utiliser plusieurs flags pour plus d&#39;options</span></span>
<span class="line"><span class="token variable">$sth</span><span class="token operator">-&gt;</span><span class="token function">setFetchMode</span><span class="token punctuation">(</span><span class="token class-name static-context">PDO</span><span class="token operator">::</span><span class="token class-name">FETCH_CLASS</span><span class="token operator">|</span><span class="token class-name">PDO</span><span class="token operator">::</span><span class="token constant">FETCH_PROPS_LATE</span><span class="token punctuation">,</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token variable">$sth</span><span class="token operator">-&gt;</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="exercices" tabindex="-1"><a class="header-anchor" href="#exercices"><span>Exercices</span></a></h2><p>Pour vous entrainer à manipuler PDO, utiliser</p><ul><li>les <a class="route-link" href="/cours/php/85-bdd-pdo.html">exercices sur notre site de bonnets</a> (à partir de l&#39;exercice 26).</li></ul></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Dernières mise à jour : </span><!----></div><!----></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/cours/php/22-factorize.html" aria-label="Factorisation"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>Factorisation</span></div></a><a class="route-link auto-link next" href="/cours/php/40-mvc.html" aria-label="Architecture MVC"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>Architecture MVC</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/cours/assets/app-BkblVdII.js" defer></script>
  </body>
</html>
