import{aj as c,ak as u,am as s,an as e,ao as t,al as l,ar as a,ap as i,aq as r}from"./app-BkblVdII.js";const d="/cours/assets/block_prefixes-SsEPevbh.png",m={},k={class:"table-of-contents"};function v(g,n){const p=i("router-link"),o=i("RouteLink");return r(),u("div",null,[n[18]||(n[18]=s("h1",{id:"formulaires",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#formulaires"},[s("span",null,"Formulaires")])],-1)),s("nav",k,[s("ul",null,[s("li",null,[e(p,{to:"#pour-resumer"},{default:t(()=>n[0]||(n[0]=[a("Pour r√©sumer")])),_:1})]),s("li",null,[e(p,{to:"#informations-importantes-avant-de-commencer"},{default:t(()=>n[1]||(n[1]=[a("Informations importantes avant de commencer")])),_:1})]),s("li",null,[e(p,{to:"#creer-un-formulaire"},{default:t(()=>n[2]||(n[2]=[a("Cr√©er un formulaire")])),_:1})]),s("li",null,[e(p,{to:"#utiliser-ce-formulaire-dans-un-controller"},{default:t(()=>n[3]||(n[3]=[a("Utiliser ce formulaire dans un controller")])),_:1})]),s("li",null,[e(p,{to:"#afficher-le-formulaire"},{default:t(()=>n[4]||(n[4]=[a("Afficher le formulaire")])),_:1}),s("ul",null,[s("li",null,[e(p,{to:"#personnaliser-tous-les-formulaires"},{default:t(()=>n[5]||(n[5]=[a("Personnaliser tous les formulaires")])),_:1})]),s("li",null,[e(p,{to:"#les-themes-de-formulaire"},{default:t(()=>n[6]||(n[6]=[a("Les th√®mes de formulaire")])),_:1})])])]),s("li",null,[e(p,{to:"#validation"},{default:t(()=>n[7]||(n[7]=[a("Validation")])),_:1}),s("ul",null,[s("li",null,[e(p,{to:"#jeton-csrf"},{default:t(()=>n[8]||(n[8]=[a("Jeton CSRF")])),_:1})])])]),s("li",null,[e(p,{to:"#transmettre-des-options"},{default:t(()=>n[9]||(n[9]=[a("Transmettre des options")])),_:1}),s("ul",null,[s("li",null,[e(p,{to:"#optionresolver"},{default:t(()=>n[10]||(n[10]=[a("OptionResolver")])),_:1})])])]),s("li",null,[e(p,{to:"#types-particuliers"},{default:t(()=>n[11]||(n[11]=[a("Types particuliers")])),_:1}),s("ul",null,[s("li",null,[e(p,{to:"#entitytype"},{default:t(()=>n[12]||(n[12]=[a("EntityType")])),_:1})]),s("li",null,[e(p,{to:"#collectiontype"},{default:t(()=>n[13]||(n[13]=[a("CollectionType")])),_:1})]),s("li",null,[e(p,{to:"#envoi-de-fichiers-vichuploaderbundle"},{default:t(()=>n[14]||(n[14]=[a("Envoi de fichiers (VichUploaderBundle)")])),_:1})])])])])]),n[19]||(n[19]=s("p",null,[s("a",{href:"https://symfony.com/doc/current/forms.html",target:"_blank",rel:"noopener noreferrer"},"La documentation officielle sur les formulaires")],-1)),n[20]||(n[20]=s("div",{style:{position:"relative","padding-bottom":"56.25%",height:"0"}},[s("iframe",{src:"https://www.loom.com/embed/dee4c01c3dfe4748a26cd0464c28b6c5",frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:"",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}})],-1)),n[21]||(n[21]=l(`<h2 id="pour-resumer" tabindex="-1"><a class="header-anchor" href="#pour-resumer"><span>Pour r√©sumer</span></a></h2><ul><li>Les formulaires sont d√©finis dans un service <code>FormType</code> (en g√©n√©ral nomm√© <code>NomDeLaClasseAssocieeType</code>).</li><li>On peut g√©n√©rer ce <code>FormType</code> avec la commande <code>make:form</code> (qui nous permet √©galement d&#39;associer une classe / une entit√©).</li><li>La m√©thode <code>buildForm()</code> du <code>FormType</code> permet d&#39;ajouter des champs de formulaire ou d&#39;en g√©rer le type et les options. <ul><li>Les types sont (pour la plupart) d√©finis dans l&#39;espace de noms <code>Symfony\\Component\\Form\\Extension\\Core\\Type</code>. Si le type est <code>null</code>, Symfony se charge d&#39;en d√©finir un √† partir de l&#39;objet associ√© au formulaire.</li><li>Les options sont d√©pendantes du type choisi (voir <a href="https://symfony.com/doc/current/reference/forms/types.html" target="_blank" rel="noopener noreferrer">les documentations des diff√©rents types</a>)</li></ul></li><li>Pour utiliser un formulaire dans un contr√¥leur, on utilise <code>$this-&gt;createForm(FQCNDuFormType, $unObjetQuiVaRecevoirLesDonnees)</code></li><li>La mise √† jour des donn√©es lors de la soumission du formulaire se faire avec <code>-&gt;handleRequest($request)</code></li><li>On peut savoir si le formulaire a √©t√© soumis avec la m√©thode <code>-&gt;isSubmitted()</code> du formulaire</li><li>Les donn√©es peuvent (et doivent, la plupart du temps) √™tre valid√©es par le formulaire avec la m√©thode <code>-&gt;isValid()</code> du formulaire <ul><li>Des contraintes (assertions) sont ajout√©es dans l&#39;entit√© / l&#39;objet li√© au formulaire (<a href="https://symfony.com/doc/current/validation.html#constraints" target="_blank" rel="noopener noreferrer">liste des contraintes disponibles par d√©faut</a>)</li></ul></li></ul><h2 id="informations-importantes-avant-de-commencer" tabindex="-1"><a class="header-anchor" href="#informations-importantes-avant-de-commencer"><span>Informations importantes avant de commencer</span></a></h2><p>Tout au long de cette section, nous allons associer nos formulaires directement √† nos entit√©s. C&#39;est l&#39;un des cas les plus courants, mais pas le seul. Ils peuvent √™tre li√©s √† n&#39;importe quelle classe PHP, voir √† aucune classe (et fonctionner avec des tableaux). Avec Symfony, les formulaires sont des objets et nous allons en aborder 3 aspects importants :</p><ul><li>Comment cr√©er et utiliser un objet de <strong>construction</strong> du formulaire</li><li>Obtenir un objet pour <strong>l&#39;affichage</strong></li><li>Utiliser notre objet de construction pour <strong>traiter</strong> les donn√©es soumises</li></ul><h2 id="creer-un-formulaire" tabindex="-1"><a class="header-anchor" href="#creer-un-formulaire"><span>Cr√©er un formulaire</span></a></h2><p>Avant toute chose, nous devons avoir une entit√© ou un objet √† associer √† notre formulaire. Reprenons la classe <code>src/Entity/Tag.php</code>, d√©finie dans la partie pr√©c√©dente :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"></span>
<span class="line"><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\\</span>Entity</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\\</span>Repository<span class="token punctuation">\\</span>TagRepository</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">Doctrine<span class="token punctuation">\\</span>Common<span class="token punctuation">\\</span>Collections<span class="token punctuation">\\</span>ArrayCollection</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">Doctrine<span class="token punctuation">\\</span>Common<span class="token punctuation">\\</span>Collections<span class="token punctuation">\\</span>Collection</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">Doctrine<span class="token punctuation">\\</span>ORM<span class="token punctuation">\\</span>Mapping</span> <span class="token keyword">as</span> <span class="token constant">ORM</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name class-name-fully-qualified">ORM<span class="token punctuation">\\</span>Entity</span><span class="token punctuation">(</span><span class="token attribute-class-name class-name">repositoryClass</span><span class="token punctuation">:</span> <span class="token attribute-class-name class-name">TagRepository</span><span class="token operator">::</span><span class="token constant">class</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name-definition class-name">Tag</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name class-name-fully-qualified">ORM<span class="token punctuation">\\</span>Id</span></span><span class="token delimiter punctuation">]</span></span></span>
<span class="line">    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name class-name-fully-qualified">ORM<span class="token punctuation">\\</span>GeneratedValue</span></span><span class="token delimiter punctuation">]</span></span></span>
<span class="line">    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name class-name-fully-qualified">ORM<span class="token punctuation">\\</span>Column</span><span class="token punctuation">(</span><span class="token attribute-class-name class-name">type</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;integer&quot;</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token variable">$id</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name class-name-fully-qualified">ORM<span class="token punctuation">\\</span>Column</span><span class="token punctuation">(</span><span class="token attribute-class-name class-name">type</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;string&quot;</span><span class="token punctuation">,</span> <span class="token attribute-class-name class-name">length</span><span class="token punctuation">:</span> <span class="token number">128</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token variable">$name</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name class-name-fully-qualified">ORM<span class="token punctuation">\\</span>OneToMany</span><span class="token punctuation">(</span><span class="token attribute-class-name class-name">targetEntity</span><span class="token punctuation">:</span> <span class="token attribute-class-name class-name">Article</span><span class="token operator">::</span><span class="token constant">class</span><span class="token punctuation">,</span> <span class="token attribute-class-name class-name">mappedBy</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;tag&quot;</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token variable">$articles</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">articles</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token operator">?</span><span class="token keyword return-type">int</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token operator">?</span><span class="token keyword return-type">string</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">setName</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">self</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">name</span> <span class="token operator">=</span> <span class="token variable">$name</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">     * <span class="token keyword">@return</span> <span class="token class-name">Collection<span class="token punctuation">|</span>Article<span class="token punctuation">[</span><span class="token punctuation">]</span></span></span>
<span class="line">     */</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getArticles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Collection</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">articles</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">addArticle</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Article</span> <span class="token variable">$article</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">self</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">articles</span><span class="token operator">-&gt;</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token variable">$article</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">articles</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$article</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token variable">$article</span><span class="token operator">-&gt;</span><span class="token function">setTag</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">removeArticle</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Article</span> <span class="token variable">$article</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">self</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">articles</span><span class="token operator">-&gt;</span><span class="token function">removeElement</span><span class="token punctuation">(</span><span class="token variable">$article</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// set the owning side to null (unless already changed)</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$article</span><span class="token operator">-&gt;</span><span class="token function">getTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token variable">$this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token variable">$article</span><span class="token operator">-&gt;</span><span class="token function">setTag</span><span class="token punctuation">(</span><span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Pour cr√©er un formulaire associ√©, utilisons la commande <code>php bin/console make:form</code> (encore une fois, les commandes de g√©n√©ration aident beaucoup üòâ ). Nous indiquons √† la commande que nous voulons cr√©er une classe <code>TagType</code> (le <code>Type</code> √† la fin du nom est standard et permet de reconnaitre les formulaires), li√© √† notre entit√© <code>Tag</code>.</p><p>Nous obtenons un fichier <code>src/Form/TagType.php</code> (comment√© et un peu am√©lior√© par rapport √† ce que g√©n√®re la commande) :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"></span>
<span class="line"><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\\</span>Form</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\\</span>Entity<span class="token punctuation">\\</span>Tag</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">Symfony<span class="token punctuation">\\</span>Component<span class="token punctuation">\\</span>Form<span class="token punctuation">\\</span>AbstractType</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">Symfony<span class="token punctuation">\\</span>Component<span class="token punctuation">\\</span>Form<span class="token punctuation">\\</span>Extension<span class="token punctuation">\\</span>Core<span class="token punctuation">\\</span>Type<span class="token punctuation">\\</span>TextType</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">Symfony<span class="token punctuation">\\</span>Component<span class="token punctuation">\\</span>Form<span class="token punctuation">\\</span>FormBuilderInterface</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">Symfony<span class="token punctuation">\\</span>Component<span class="token punctuation">\\</span>OptionsResolver<span class="token punctuation">\\</span>OptionsResolver</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Les formulaires √©tendent tous AbstractType, fourni par Symfony, afin de r√©cup√©rer diverses m√©thodes utiles √† la construction, la configuration et l&#39;affichage du formulaire</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name-definition class-name">TagType</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractType</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// buildForm va nous permettre de d√©finir les diff√©rents champs de notre formulaire, leur type et des options dont ils auront besoin</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">buildForm</span><span class="token punctuation">(</span><span class="token class-name type-declaration">FormBuilderInterface</span> <span class="token variable">$builder</span><span class="token punctuation">,</span> <span class="token keyword type-hint">array</span> <span class="token variable">$options</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token variable">$builder</span></span>
<span class="line">            <span class="token comment">// Ici, un champ name est cr√©√©, il correspond √† la propri√©t√© name de notre entit√©</span></span>
<span class="line">            <span class="token operator">-&gt;</span><span class="token function">add</span><span class="token punctuation">(</span></span>
<span class="line">                <span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token comment">// Le champ prend un nom, identique au nom d&#39;une propri√©t√© de notre classe li√©e</span></span>
<span class="line">                <span class="token class-name static-context">TextType</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token comment">// On peut lui donner un type (ici, on dit que c&#39;est un input de type text </span></span>
<span class="line">                <span class="token punctuation">[</span></span>
<span class="line">                    <span class="token string single-quoted-string">&#39;required&#39;</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// On passe une option, pour pr√©ciser que ce champ est requis (ne doit pas √™tre vide)</span></span>
<span class="line">                <span class="token punctuation">]</span></span>
<span class="line">            <span class="token punctuation">)</span></span>
<span class="line">            <span class="token operator">-&gt;</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;articles&#39;</span><span class="token punctuation">)</span> <span class="token comment">// Un autre champ est cr√©√©, on laisse Symfony en d√©terminer le type et les options</span></span>
<span class="line">        <span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">configureOptions</span><span class="token punctuation">(</span><span class="token class-name type-declaration">OptionsResolver</span> <span class="token variable">$resolver</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// On d√©finit certaines options de notre formulaire. Ici, on lie une classe (notre entit√© Tag) √† ce formulaire. </span></span>
<span class="line">        <span class="token variable">$resolver</span><span class="token operator">-&gt;</span><span class="token function">setDefaults</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">            <span class="token string single-quoted-string">&#39;data_class&#39;</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">Tag</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Pour les diff√©rents <a href="https://symfony.com/doc/current/reference/forms/types.html" target="_blank" rel="noopener noreferrer">types de champs disponibles et leurs options</a>, je vous invite √† vous r√©f√©rer √† <a href="https://symfony.com/doc/current/reference/forms/types.html" target="_blank" rel="noopener noreferrer">la documentation officielle</a></p><h2 id="utiliser-ce-formulaire-dans-un-controller" tabindex="-1"><a class="header-anchor" href="#utiliser-ce-formulaire-dans-un-controller"><span>Utiliser ce formulaire dans un controller</span></a></h2><p>Pour cr√©er un formulaire √† partir de notre <code>TagType</code> (qui est un plan de fabrication, ou formulaire type), Symfony et son <code>AbstractController</code> nous offre une m√©thode <code>createForm</code> :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">Route</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;/new&quot;</span><span class="token punctuation">,</span> <span class="token attribute-class-name class-name">name</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;tag_new&quot;</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Request</span> <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">TagRepository</span> <span class="token variable">$tagRepository</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Response</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token variable">$tag</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// On cr√©e le formulaire (objet de traitement)</span></span>
<span class="line">    <span class="token comment">// Premier param√®tre : le formulaire type (FQCN)</span></span>
<span class="line">    <span class="token comment">// Deuxi√®me param√®tre : l&#39;objet √† manipuler (√† synchroniser avec le formulaire)</span></span>
<span class="line">    <span class="token comment">// Troisi√®me param√®tre : des options du formulaire (optionnelles)</span></span>
<span class="line">    <span class="token variable">$form</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">createForm</span><span class="token punctuation">(</span><span class="token class-name static-context">TagType</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token variable">$tag</span><span class="token punctuation">,</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;method&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;POST&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;action&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">generateUrl</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;tag_new&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// On dit explicitement au formulaire de traiter ce que contient la requ√™te (objet Request)</span></span>
<span class="line">    <span class="token variable">$form</span><span class="token operator">-&gt;</span><span class="token function">handleRequest</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// On regarde si le formulaire a √©t√© soumis ET est valide</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$form</span><span class="token operator">-&gt;</span><span class="token function">isSubmitted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$form</span><span class="token operator">-&gt;</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// On enregistre</span></span>
<span class="line">        <span class="token variable">$tagRepository</span><span class="token operator">-&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token variable">$tag</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment">// On peut √©galement afficher un message √† l&#39;utilisateur</span></span>
<span class="line">        <span class="token comment">// Les flashs sont affich√©s une fois, au chargement de la page suivante</span></span>
<span class="line">        <span class="token comment">// Et permettent donc d&#39;afficher un message, malgr√© une redirection</span></span>
<span class="line">        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">addFlash</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;success&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;Donn√©e ins√©r√©e&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// Une fois que le formulaire est valid√©,</span></span>
<span class="line">        <span class="token comment">// on redirige pour √©viter que l&#39;utilisateur ne recharge la page</span></span>
<span class="line">        <span class="token comment">// et soumette la m√™me information une seconde fois</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">redirectToRoute</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;tag_index&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;tag/new.html.twig&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;form&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$form</span><span class="token operator">-&gt;</span><span class="token function">createView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// On cr√©e un objet FormView, qui sert √† l&#39;affichage de notre formulaire</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Il y a plusieurs √©l√©ments √† noter ici :</p><ul><li><code>$form = $this-&gt;createForm(TagType::class, $tag)</code> permet de cr√©er un objet <code>Form</code> pour traiter le formulaire et synchroniser notre objet <code>$tag</code> avec le contenu du formulaire.</li><li><code>$form-&gt;handleRequest($request);</code> dit au formulaire d&#39;aller regarder les donn√©es GET et POST dans la requ√™te (et les ins√®re dans notre objet <code>$tag</code> si n√©cessaire)</li><li><code>if ($form-&gt;isSubmitted() &amp;&amp; $form-&gt;isValid()) {</code> on v√©rifie si le formulaire a √©t√© soumis et si son contenu est valide. Si √ßa n&#39;est pas le cas, on affiche le formulaire avec les √©ventuelles erreurs. Si le formulaire est valide (voir la section sur la validation, plus bas), on enregistre les donn√©es en base.</li><li><code>&#39;form&#39; =&gt; $form-&gt;createView()</code> cr√©e un objet FormView afin de g√©rer son affichage dans notre vue Twig</li></ul><h2 id="afficher-le-formulaire" tabindex="-1"><a class="header-anchor" href="#afficher-le-formulaire"><span>Afficher le formulaire</span></a></h2><p>Prenons un affichage assez classique :</p><div class="language-Twig line-numbers-mode" data-highlighter="prismjs" data-ext="Twig" data-title="Twig"><pre><code><span class="line">{# On affiche la balise &lt;form&gt; #}</span>
<span class="line">{{ form_start(form) }}</span>
<span class="line">    {# On affiche une &quot;row&quot; de notre formulaire, c&#39;est √† dire un bloc qui va contenir le label (balise label) et le widget (ici un champ input de type text) #}</span>
<span class="line">    {# On ajoute des attributs sur la div, sur le widget et sur le label #}</span>
<span class="line">    {{ form_row(form.name, {</span>
<span class="line">        row_attr: {</span>
<span class="line">            class: &#39;form-line&#39;,</span>
<span class="line">            &quot;data-line&quot;: true</span>
<span class="line">        },</span>
<span class="line">        attr: {</span>
<span class="line">            class: &#39;form-widget&#39;,</span>
<span class="line">        },</span>
<span class="line">        label_attr: {</span>
<span class="line">            class: &#39;form-label&#39;,</span>
<span class="line">        },</span>
<span class="line">    }) }}</span>
<span class="line">    </span>
<span class="line">    {# On affiche une &quot;row&quot; de notre formulaire, c&#39;est √† dire un bloc qui va contenir le label (balise label) et le widget (ici un champ input de type text) #}</span>
<span class="line">    {{ form_row(form.computers) }}</span>
<span class="line"></span>
<span class="line">    {# On affiche les √©ventuels champs qui n&#39;aurait pas √©t√© affich√©s jusqu&#39;ici #}</span>
<span class="line">    {{ form_rest(form) }}</span>
<span class="line">    {# On ajoute un bouton de validation du formulaire, nous n&#39;en avons pas mis dans notre objet TagType #}</span>
<span class="line">    &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Valider&lt;/button&gt;</span>
<span class="line">{# On affiche la balise &lt;/form&gt; et les √©ventuels champs qui n&#39;aurait pas √©t√© affich√©s jusqu&#39;ici #}</span>
<span class="line">{{ form_end(form) }}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Plusieurs fonctions Twig (uniquement disponibles avec Symfony) peuvent nous servir pour afficher un formulaire ou ses √©l√©ments (dans les exemples, nous avons une variable form, qui contient un objet <code>FormView</code>) :</p><ul><li><code>form(form)</code> affiche tout le formulaire (les balises <code>&lt;form&gt;&lt;/form&gt;</code> et tous les champs)</li><li><code>form_row(form.nomDuChamp)</code> affiche une ligne de formulaire (en g√©n√©ral, une <code>div</code> contenant : un label, les √©ventuelles erreurs et le widget)</li><li><code>form_label(form.nomDuChamp)</code> affiche la balise <code>&lt;label&gt;&lt;/label&gt;</code> li√© au champ <code>nomDuChamp</code></li><li><code>form_widget(form.nomDuChamp)</code> affiche le widget du champ (n&#39;importe quel type de champ de formulaire HTML avec lequel l&#39;utilisateur peut interagir)</li><li><code>form_errors(form.nomDuChamp)</code> affiche un bloc avec les erreurs li√©es au champ <code>nomDuChamp</code></li></ul><p>Ce sch√©ma venu de la documentation r√©sume tout cela :</p><p><object data="https://symfony.com/doc/current/_images/form/form-field-parts.svg" type="image/svg+xml"></object></p><h3 id="personnaliser-tous-les-formulaires" tabindex="-1"><a class="header-anchor" href="#personnaliser-tous-les-formulaires"><span>Personnaliser tous les formulaires</span></a></h3><p>Pour utiliser directement Bootstrap 5, Symfony fournit un th√®me de formulaire permettant d&#39;avoir directement les bonnes classes sur tous les champs et leurs contenants :</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">twig</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">default_path</span><span class="token punctuation">:</span> <span class="token string">&#39;%kernel.project_dir%/templates&#39;</span></span>
<span class="line">    <span class="token key atrule">form_themes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;bootstrap_5_horizontal_layout.html.twig&#39;</span><span class="token punctuation">]</span> <span class="token comment"># On dit √† Symfony d&#39;utiliser un th√®me d√©j√† pr√™t, int√©grant les classes de Boostrap (version 5)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Pour que notre th√®me fonctionne, il nous faut ajouter le css de Bootstrap dans notre fichier <code>base.html.twig</code> :</p><div class="language-Twig line-numbers-mode" data-highlighter="prismjs" data-ext="Twig" data-title="Twig"><pre><code><span class="line">&lt;link href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot; integrity=&quot;sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3&quot; crossorigin=&quot;anonymous&quot;&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Il y a √©galement d&#39;autres th√®mes disponibles, que vous pouvez voir dans le dossier <code>vendor/symfony/twig-bridge/Resources/views/Form/</code> de votre projet (par d√©faut, Symfony utilise le th√®me <code>form_div_layout.html.twig</code>).</p><p>Nous pouvons √©galement aller bien plus loin et cr√©er notre propre th√®me de formulaire, je vous laisse voir <a href="https://symfony.com/doc/current/form/form_themes.html" target="_blank" rel="noopener noreferrer">la documentation Symfony sur le sujet</a> ou ci-dessous.</p><h3 id="les-themes-de-formulaire" tabindex="-1"><a class="header-anchor" href="#les-themes-de-formulaire"><span>Les th√®mes de formulaire</span></a></h3><p>Outre les th√®mes fournis par Symfony, vous pouvez cr√©er vos propres th√®mes. Soit pour √©tendre ce que propose un th√®me existant, soit pour personnaliser un ensemble de champs. Un th√®me est d&#39;√™tre r√©utilisable et peut √™tre utilis√© sur un, plusieurs ou tous les formulaires d&#39;un site.</p><h4 id="appliquer-les-themes" tabindex="-1"><a class="header-anchor" href="#appliquer-les-themes"><span>Appliquer les th√®mes</span></a></h4><p>Une fois votre th√®me cr√©√©, vous pouvez l&#39;utiliser comme ci-dessus (d√©finition d&#39;un th√®me global, appliqu√© √† tous les formulaires) ou sur un formulaire pr√©cis, avec le tag <code>form_theme</code> dans Twig.</p><p>Appliquer un th√®me sur un formulaire :</p><div class="language-twig line-numbers-mode" data-highlighter="prismjs" data-ext="twig" data-title="twig"><pre><code><span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">form_theme</span> form <span class="token string"><span class="token punctuation">&#39;</span>foundation_5_layout.html.twig<span class="token punctuation">&#39;</span></span> <span class="token delimiter punctuation">%}</span></span></span>
<span class="line"></span>
<span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> form_start<span class="token punctuation">(</span>form<span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></span>
<span class="line">    <span class="token twig language-twig"><span class="token comment">{# ... #}</span></span></span>
<span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> form_end<span class="token punctuation">(</span>form<span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Appliquer plusieurs th√®mes sur un formulaire :</p><div class="language-twig line-numbers-mode" data-highlighter="prismjs" data-ext="twig" data-title="twig"><pre><code><span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">form_theme</span> form with <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string"><span class="token punctuation">&#39;</span>foundation_5_layout.html.twig<span class="token punctuation">&#39;</span></span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string"><span class="token punctuation">&#39;</span>forms/my_custom_theme.html.twig<span class="token punctuation">&#39;</span></span></span>
<span class="line"><span class="token punctuation">]</span> <span class="token delimiter punctuation">%}</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Vous pouvez √©galement appliquer un th√®me √† un sous-formulaire de la m√™me mani√®re :</p><div class="language-twig line-numbers-mode" data-highlighter="prismjs" data-ext="twig" data-title="twig"><pre><code><span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">form_theme</span> form<span class="token punctuation">.</span>child <span class="token string"><span class="token punctuation">&#39;</span>foundation_5_layout.html.twig<span class="token punctuation">&#39;</span></span> <span class="token delimiter punctuation">%}</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Vous pouvez √©galement appliquer un th√®me √† un formulaire et un autre √† l&#39;un de ses enfants :</p><div class="language-twig line-numbers-mode" data-highlighter="prismjs" data-ext="twig" data-title="twig"><pre><code><span class="line"><span class="token twig language-twig"><span class="token comment">{# Ajout d&#39;un th√®me sur tout le formulaire #}</span></span></span>
<span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">form_theme</span> form <span class="token string"><span class="token punctuation">&#39;</span>form/my_custom_theme.html.twig<span class="token punctuation">&#39;</span></span> <span class="token delimiter punctuation">%}</span></span></span>
<span class="line"><span class="token twig language-twig"><span class="token comment">{# Ajout d&#39;un th√®me sur un enfant #}</span></span></span>
<span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">form_theme</span> form<span class="token punctuation">.</span>child <span class="token string"><span class="token punctuation">&#39;</span>form/my_other_theme.html.twig<span class="token punctuation">&#39;</span></span> <span class="token delimiter punctuation">%}</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Vous pouvez forcer l&#39;application d&#39;un seul th√®me sur un formulaire :</p><div class="language-twig line-numbers-mode" data-highlighter="prismjs" data-ext="twig" data-title="twig"><pre><code><span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">form_theme</span> form with <span class="token punctuation">[</span><span class="token string"><span class="token punctuation">&#39;</span>foundation_5_layout.html.twig<span class="token punctuation">&#39;</span></span><span class="token punctuation">]</span> only <span class="token delimiter punctuation">%}</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="creer-un-theme" tabindex="-1"><a class="header-anchor" href="#creer-un-theme"><span>Cr√©er un th√®me</span></a></h4><p>Cr√©er un th√®me de formulaire permet de d√©finir comment chaque champ va s&#39;afficher (que ce soit pour tous vos formulaires ou des formulaires sp√©cifiques). Nous pouvons ici personnaliser <strong>tout</strong> le HTML du champ.</p><p>Vous pourrez trouver un exemple (et le th√®me appliqu√© par d√©faut √† <strong>tous</strong> les formulaires) dans <code>vendor/symfony/twig-bridge/Resources/views/Form/form_div_layout.html.twig</code></p><p>Lorsque Symfony est configur√© pour utiliser Twig pour afficher nos vues (ce qui est notre cas üòâ ), il utillise des blocs Twig pour afficher les diff√©rents champs de notre formulaire. Il en cr√©e pour chaque partie du champ, √† savoir :</p><ul><li>le label (que l&#39;on peut appeler avec <code>form_label(form)</code>)</li><li>le widget (par exemple un champ <code>input</code> ou <code>select</code>) (que l&#39;on peut appeler avec <code>form_input(form)</code>)</li><li>les erreurs (que l&#39;on peut appeler avec <code>form_errors(form)</code>)</li><li>le message d&#39;aide (<code>help</code>) (que l&#39;on peut appeler avec <code>form_help(form)</code>)</li></ul><p>Toutes ces parties sont regroup√©es dans une <code>row</code> (par d√©faut, une <code>div</code> qui contient les 4 autres √©l√©ments) (que l&#39;on peut appeler avec <code>form_row(form)</code>).</p><p>Pour cr√©er votre propre th√®me, vous pouvez vous inspirer de <code>vendor/symfony/twig-bridge/Resources/views/Form/bootstrap_5_layout.html.twig</code>. nous allons en prendre des exemples, pour d√©cortiquer le fonctionnement du th√®me.</p><p>D√©j√†, on peut constater que ce th√®me en √©tend un autre (c&#39;est le moyen le plus simple, pour styler <strong>tous</strong> les formulaires), qui √©tend lui-m√™me <code>form_div_layout.html.twig</code> :</p><div class="language-twig line-numbers-mode" data-highlighter="prismjs" data-ext="twig" data-title="twig"><pre><code><span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">use</span> <span class="token string"><span class="token punctuation">&quot;</span>bootstrap_base_layout.html.twig<span class="token punctuation">&quot;</span></span> <span class="token delimiter punctuation">%}</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Ce qui veut dire que le template va h√©riter de tous les blocs de ses parents et peut les surcharger. Par exemple, pour modifier l&#39;affichage d&#39;un bouton (de type submit), ce th√®me nous donne ce code :</p><div class="language-twig line-numbers-mode" data-highlighter="prismjs" data-ext="twig" data-title="twig"><pre><code><span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%-</span> <span class="token tag-name keyword">block</span> submit_widget <span class="token delimiter punctuation">-%}</span></span></span>
<span class="line">    <span class="token twig language-twig"><span class="token delimiter punctuation">{%-</span> <span class="token tag-name keyword">set</span> attr <span class="token operator">=</span> attr<span class="token operator">|</span>merge<span class="token punctuation">(</span><span class="token punctuation">{</span>class<span class="token punctuation">:</span> <span class="token punctuation">(</span>attr<span class="token punctuation">.</span>class<span class="token operator">|</span>default<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">&#39;</span>btn-primary<span class="token punctuation">&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">|</span>trim<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token delimiter punctuation">-%}</span></span></span>
<span class="line">    <span class="token twig language-twig"><span class="token delimiter punctuation">{{-</span> parent<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token delimiter punctuation">-}}</span></span></span>
<span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%-</span> <span class="token tag-name keyword">endblock</span> submit_widget <span class="token delimiter punctuation">%}</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>D√©composons :</p><p><code>{%- block submit_widget -%}</code> d√©finit le bloc que nous surchargeons/cr√©ons. Le nom du bloc contient:</p><ul><li>Le nom du champ <code>submit</code><ul><li>L&#39;√©l√©ment du formulaire qui est modifi√©/affich√© dans ce bloc : le <code>widget</code> Ce bloc est donc appel√© quand le formulaire appelle la fonction <code>form_widget()</code> d&#39;un champ de type <code>SubmitType</code></li></ul></li></ul><p>Ainsi, si nous avons un formulaire de contact (nomm√© <code>contact</code>), on peut modifier l&#39;affichage d&#39;un champ <code>email</code> comme ceci :</p><div class="language-twig line-numbers-mode" data-highlighter="prismjs" data-ext="twig" data-title="twig"><pre><code><span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%-</span> <span class="token tag-name keyword">block</span> contact_email_widget <span class="token delimiter punctuation">-%}</span></span></span>
<span class="line">  <span class="token twig language-twig"><span class="token comment">{# On personnalise l&#39;affichage ici #}</span></span></span>
<span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%-</span> <span class="token tag-name keyword">endblock</span> <span class="token delimiter punctuation">-%}</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Si on veut modifier l&#39;affichage du label, on utilisera <code>block contact_email_label</code>, ou <code>block contact_email_row</code> pour la ligne, par exemple.</p><div class="language-twig line-numbers-mode" data-highlighter="prismjs" data-ext="twig" data-title="twig"><pre><code><span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%-</span> <span class="token tag-name keyword">block</span> submit_widget <span class="token delimiter punctuation">-%}</span></span></span>
<span class="line">    <span class="token twig language-twig"><span class="token delimiter punctuation">{%-</span> <span class="token tag-name keyword">set</span> attr <span class="token operator">=</span> attr<span class="token operator">|</span>merge<span class="token punctuation">(</span><span class="token punctuation">{</span>class<span class="token punctuation">:</span> <span class="token punctuation">(</span>attr<span class="token punctuation">.</span>class<span class="token operator">|</span>default<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">&#39;</span>btn-primary<span class="token punctuation">&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">|</span>trim<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token delimiter punctuation">-%}</span></span></span>
<span class="line">    <span class="token twig language-twig"><span class="token delimiter punctuation">{{-</span> parent<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token delimiter punctuation">-}}</span></span></span>
<span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%-</span> <span class="token tag-name keyword">endblock</span> submit_widget <span class="token delimiter punctuation">%}</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ici, on fait plusieurs op√©rations :</p><ul><li><code>attr = </code> : On modifie la variable <code>attr</code>,</li><li><code>|merge(...)</code> : en la fusionnant avec un autre tableau,</li><li><code>{class: (attr.class|default(&#39;btn-primary&#39;))|trim}</code> : contenant la classe <code>&#39;btn-primary&#39;</code> si aucune classe n&#39;est pr√©sente dans le tableau <code>attr</code> d&#39;origine (et dans sa propri√©t√© <code>class</code>)</li></ul><p>Tout cela nous permet d&#39;afficher les boutons type submit avec la classe <code>btn-primary</code> par d√©faut.</p><p>On appelle ensuite le block <code>submit_widget</code> du parent pour en r√©cup√©rer tout le fonctionnement (la seule diff√©rence est donc la modification de la variable <code>attr</code>).</p><p>Un autre exemple, pour personnaliser toutes nos <code>form_row()</code>, sans faire appel √† un block d&#39;un parent :</p><div class="language-twig line-numbers-mode" data-highlighter="prismjs" data-ext="twig" data-title="twig"><pre><code><span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%-</span> <span class="token tag-name keyword">block</span> form_row <span class="token delimiter punctuation">-%}</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form__row<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token twig language-twig"><span class="token delimiter punctuation">{{-</span> form_label<span class="token punctuation">(</span>form<span class="token punctuation">)</span> <span class="token delimiter punctuation">-}}</span></span></span>
<span class="line">        <span class="token twig language-twig"><span class="token delimiter punctuation">{{-</span> form_errors<span class="token punctuation">(</span>form<span class="token punctuation">)</span> <span class="token delimiter punctuation">-}}</span></span></span>
<span class="line">        <span class="token twig language-twig"><span class="token delimiter punctuation">{{-</span> form_widget<span class="token punctuation">(</span>form<span class="token punctuation">)</span> <span class="token delimiter punctuation">-}}</span></span></span>
<span class="line">        <span class="token twig language-twig"><span class="token delimiter punctuation">{{-</span> form_help<span class="token punctuation">(</span>form<span class="token punctuation">)</span> <span class="token delimiter punctuation">-}}</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%-</span> <span class="token tag-name keyword">endblock</span> form_row <span class="token delimiter punctuation">-%}</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Avec ce th√®me, on ajoute une classe <code>form__row</code> √† toutes les rows que l&#39;on appelle avec la fonction <code>form_row()</code>.</p><p>‚ö†Ô∏è Faire ceci rend inutilisable l&#39;option <code>row_attr</code> que vous pouvez passer √† la fonction <code>form_row()</code>, il s&#39;agit juste d&#39;un exemple.</p><h5 id="personnaliser-un-formulaire-precis" tabindex="-1"><a class="header-anchor" href="#personnaliser-un-formulaire-precis"><span>Personnaliser un formulaire pr√©cis</span></a></h5><p>Dans votre th√®me, vous pourriez vouloir personnaliser un formulaire tr√®s pr√©cis (par exemple, l&#39;affichage d&#39;une liste de races de chiens dans un formulaire de cr√©ation d&#39;un chien).</p><p>Dans l&#39;affichage de notre formulaire, on peut ajouter un <code>dump()</code> pour trouver l&#39;information qui nous int√©resse, <code>block_prefix</code> :</p><div class="language-twig line-numbers-mode" data-highlighter="prismjs" data-ext="twig" data-title="twig"><pre><code><span class="line">    <span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> form_start<span class="token punctuation">(</span>form<span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></span>
<span class="line">        <span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> form_row<span class="token punctuation">(</span>form<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></span>
<span class="line">        <span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> form_row<span class="token punctuation">(</span>form<span class="token punctuation">.</span>breeds<span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></span>
<span class="line"></span>
<span class="line">        <span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> dump<span class="token punctuation">(</span>form<span class="token punctuation">.</span>breeds<span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></span>
<span class="line"></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Valider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> form_end<span class="token punctuation">(</span>form<span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Avec ce dump, nous pouvons trouver l&#39;information ici :</p><p><img src="`+d+`" alt=""></p><p>Cette variable <code>block_prefixes</code> nous donne la base des diff√©rents noms que nous pouvons donner √† notre block (dans notre th√®me de formulaire), du plus g√©n√©rique (<code>form</code>) au plus sp√©cifique (<code>_dog_breeds</code>). Gr√¢ce √† cela, nous pouvons d√©duire les noms possibles pour notre bloc :</p><ul><li><code>form_row</code> pour personnaliser toutes les <code>form_row</code></li><li><code>choice_row</code> pour personnaliser la row de tous les formulaires <code>ChoiceType</code> (dont h√©rite <code>EntityType</code>)</li><li><code>entity_row</code> pour personnaliser la row de tous les formulaires <code>EntityType</code></li><li><code>_dog_breeds_row</code> si on veut personnaliser la row de ce formulaire sp√©cifique</li></ul><p>Dans notre exemple, l&#39;id√©e est de ne personnaliser que <strong>ce</strong> champ pr√©cis. Nous allons donc avoir ceci dans notre fichier de th√®me :</p><div class="language-twig line-numbers-mode" data-highlighter="prismjs" data-ext="twig" data-title="twig"><pre><code><span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">block</span> _dog_breeds_row <span class="token delimiter punctuation">%}</span></span></span>
<span class="line">    <span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> dump<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></span>
<span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endblock</span> _dog_breeds_row <span class="token delimiter punctuation">%}</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Le <code>dump</code> dans l&#39;exemple ci-dessus permet d&#39;afficher toutes les variables disponibles au moment de l&#39;appel. Vous remarquerez que vous ne manquez pas d&#39;informations √† exploiter üòâ .</p><p>Personnellement, je vais me contenter d&#39;ajouter une classe sur la row et d&#39;appeler l&#39;affichage d&#39;une row classique :</p><div class="language-twig line-numbers-mode" data-highlighter="prismjs" data-ext="twig" data-title="twig"><pre><code><span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">block</span> _dog_breeds_row <span class="token delimiter punctuation">%}</span></span></span>
<span class="line">    <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">set</span> row_attr <span class="token operator">=</span> row_attr<span class="token operator">|</span>merge<span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token string"><span class="token punctuation">&#39;</span>class<span class="token punctuation">&#39;</span></span><span class="token punctuation">:</span> <span class="token punctuation">(</span>row_attr<span class="token punctuation">.</span>class<span class="token operator">|</span>default<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">&#39;</span><span class="token punctuation">&#39;</span></span><span class="token punctuation">)</span> <span class="token operator">~</span> <span class="token string"><span class="token punctuation">&#39;</span> breed__list<span class="token punctuation">&#39;</span></span><span class="token punctuation">)</span><span class="token operator">|</span>trim<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token delimiter punctuation">%}</span></span></span>
<span class="line">    <span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> form_row<span class="token punctuation">(</span>form<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">        row_attr<span class="token punctuation">:</span> row_attr<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></span>
<span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endblock</span> _dog_breeds_row <span class="token delimiter punctuation">%}</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>On peut, bien s√ªr, aller beaucoup plus loin avec ces th√®mes, mais je vous invite √† consulter la <a href="https://symfony.com/doc/current/form/form_themes.html#creating-your-own-form-theme" target="_blank" rel="noopener noreferrer">documentation officielle sur les th√®mes</a> pour plus de d√©tails et d&#39;exemples.</p><h2 id="validation" tabindex="-1"><a class="header-anchor" href="#validation"><span>Validation</span></a></h2>`,86)),n[22]||(n[22]=s("div",{style:{position:"relative","padding-bottom":"56.25%",height:"0"}},[s("iframe",{src:"https://www.loom.com/embed/b88d161509d748049d9f0e1c8883cfbc",frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:"",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}})],-1)),n[23]||(n[23]=l(`<p>Pour v√©rifier que notre entit√© est valide, <a href="https://symfony.com/doc/current/validation.html" target="_blank" rel="noopener noreferrer">Symfony met √† notre disposition un ensemble d&#39;outils de validation</a>.</p><p>Par exemple, nous pouvons v√©rifier que la propri√©t√© <code>name</code> de notre objet <code>Tag</code> n&#39;est pas vide :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"></span>
<span class="line"><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\\</span>Entity</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\\</span>Repository<span class="token punctuation">\\</span>TagRepository</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">Doctrine<span class="token punctuation">\\</span>Common<span class="token punctuation">\\</span>Collections<span class="token punctuation">\\</span>ArrayCollection</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">Doctrine<span class="token punctuation">\\</span>Common<span class="token punctuation">\\</span>Collections<span class="token punctuation">\\</span>Collection</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">Doctrine<span class="token punctuation">\\</span>ORM<span class="token punctuation">\\</span>Mapping</span> <span class="token keyword">as</span> <span class="token constant">ORM</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">Symfony<span class="token punctuation">\\</span>Component<span class="token punctuation">\\</span>Validator<span class="token punctuation">\\</span>Constraints</span> <span class="token keyword">as</span> Assert<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name class-name-fully-qualified">ORM<span class="token punctuation">\\</span>Entity</span><span class="token punctuation">(</span><span class="token attribute-class-name class-name">repositoryClass</span><span class="token punctuation">:</span> <span class="token attribute-class-name class-name">TagRepository</span><span class="token operator">::</span><span class="token constant">class</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name-definition class-name">Tag</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// ...</span></span>
<span class="line">    </span>
<span class="line">    #<span class="token punctuation">[</span><span class="token constant">ORM</span><span class="token function"><span class="token punctuation">\\</span>Column</span><span class="token punctuation">(</span><span class="token argument-name">type</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;string&quot;</span><span class="token punctuation">,</span> <span class="token argument-name">length</span><span class="token punctuation">:</span> <span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token comment">// Une assertion pour v√©rifier que notre name n&#39;est pas vide</span></span>
<span class="line">    #<span class="token punctuation">[</span><span class="token function">Assert<span class="token punctuation">\\</span>NotBlank</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token comment">// Une autre pour v√©rifier qu&#39;il contienne au moins 4 caract√®res</span></span>
<span class="line">    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name class-name-fully-qualified">Assert<span class="token punctuation">\\</span>Length</span><span class="token punctuation">(</span><span class="token attribute-class-name class-name">min</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token variable">$name</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name class-name-fully-qualified">ORM<span class="token punctuation">\\</span>OneToMany</span><span class="token punctuation">(</span><span class="token attribute-class-name class-name">targetEntity</span><span class="token punctuation">:</span> <span class="token attribute-class-name class-name">Article</span><span class="token operator">::</span><span class="token constant">class</span><span class="token punctuation">,</span> <span class="token attribute-class-name class-name">mappedBy</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;tag&quot;</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token variable">$articles</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// ... </span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>On utilise la validation de mani√®re assez constante :</p><ul><li>On utilise le namespace des contraintes fournies par Symfony <code>use Symfony\\Component\\Validator\\Constraints as Assert;</code></li><li>On appelle des assertions en annotation de nos propri√©t√©s ou m√©thodes : <code>@Assert\\NotBlank()</code></li></ul><p>Vous trouverez une liste plus compl√®te des assertions disponibles dans <a href="https://symfony.com/doc/current/validation.html#constraints" target="_blank" rel="noopener noreferrer">la documentation sur la validation</a></p><p>Ainsi, si on valide le formulaire de cr√©ation de tag avec une valeur invalide, un message d&#39;erreur sera affich√© (ce message peut d&#39;ailleurs √™tre personnalis√©, mais je vous invite √† consulter la documentation pour voir comment).</p><h3 id="jeton-csrf" tabindex="-1"><a class="header-anchor" href="#jeton-csrf"><span>Jeton CSRF</span></a></h3><p><a href="https://jolicode.com/blog/comprendre-et-eviter-les-attaques-csrf-grace-a-symfony" target="_blank" rel="noopener noreferrer">Tr√®s bon article de J√©r√¥me Gagneux (JoliCode) sur le sujet</a></p><h2 id="transmettre-des-options" tabindex="-1"><a class="header-anchor" href="#transmettre-des-options"><span>Transmettre des options</span></a></h2><p><a href="https://symfony.com/doc/current/forms.html#passing-options-to-forms" target="_blank" rel="noopener noreferrer">Doc</a></p><ul><li>D√©finir l&#39;option (setDefault/setRequired/etc.)</li><li>Transmettre une valeur au formulaire (controller)</li><li>L&#39;utiliser dans le FormType</li></ul><h3 id="optionresolver" tabindex="-1"><a class="header-anchor" href="#optionresolver"><span>OptionResolver</span></a></h3><ul><li>setDefault()</li><li>setRequired()</li><li>setAllowedTypes()</li></ul><h2 id="types-particuliers" tabindex="-1"><a class="header-anchor" href="#types-particuliers"><span>Types particuliers</span></a></h2><p>Pour les diff√©rents <a href="https://symfony.com/doc/current/reference/forms/types.html" target="_blank" rel="noopener noreferrer">types de champs disponibles et leurs options</a>, je vous invite √† vous r√©f√©rer √† <a href="https://symfony.com/doc/current/reference/forms/types.html" target="_blank" rel="noopener noreferrer">la documentation officielle</a>.</p><h3 id="entitytype" tabindex="-1"><a class="header-anchor" href="#entitytype"><span>EntityType</span></a></h3><p>La <a href="https://symfony.com/doc/current/reference/forms/types/entity.html" target="_blank" rel="noopener noreferrer">documentation de EntityType</a></p>`,18)),n[24]||(n[24]=s("iframe",{class:"yt-video",src:"https://www.youtube.com/embed/w7iTuUlHm6w",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,-1)),n[25]||(n[25]=s("h3",{id:"collectiontype",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#collectiontype"},[s("span",null,"CollectionType")])],-1)),n[26]||(n[26]=s("p",null,[a("La "),s("a",{href:"https://symfony.com/doc/current/reference/forms/types/collection.html",target:"_blank",rel:"noopener noreferrer"},"documentation de CollectionType")],-1)),n[27]||(n[27]=s("p",null,[s("a",{href:"https://symfony.com/doc/current/form/form_collections.html",target:"_blank",rel:"noopener noreferrer"},"L'impl√©mentation des collections avec du javascript dans la documentation d√©di√©e")],-1)),n[28]||(n[28]=s("iframe",{class:"yt-video",src:"https://www.youtube.com/embed/HXHk8TJfW8U",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,-1)),n[29]||(n[29]=l(`<h4 id="formulaire-d-exemple" tabindex="-1"><a class="header-anchor" href="#formulaire-d-exemple"><span>Formulaire d&#39;exemple</span></a></h4><h5 id="champ-dans-le-formtype" tabindex="-1"><a class="header-anchor" href="#champ-dans-le-formtype"><span>Champ dans le FormType</span></a></h5><p>Le champ <code>chapters</code> dans <code>src\\Form\\BookType.php</code> :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token operator">-&gt;</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;chapters&#39;</span><span class="token punctuation">,</span> <span class="token class-name static-context">CollectionType</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;entry_type&#39;</span>     <span class="token operator">=&gt;</span> <span class="token class-name static-context">ChapterType</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;entry_options&#39;</span>  <span class="token operator">=&gt;</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;label&#39;</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;prototype_name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;__chapters__&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;label&#39;</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Chapitres&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;allow_add&#39;</span>      <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;allow_delete&#39;</span>   <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;by_reference&#39;</span>   <span class="token operator">=&gt;</span> <span class="token constant boolean">false</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="twig" tabindex="-1"><a class="header-anchor" href="#twig"><span>Twig</span></a></h5><p>Mon fichier <code>templates/book/form.html.twig</code> :</p><div class="language-twig line-numbers-mode" data-highlighter="prismjs" data-ext="twig" data-title="twig"><pre><code><span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">extends</span> <span class="token string"><span class="token punctuation">&#39;</span>base.html.twig<span class="token punctuation">&#39;</span></span> <span class="token delimiter punctuation">%}</span></span></span>
<span class="line"></span>
<span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">block</span> title <span class="token delimiter punctuation">%}</span></span></span>
<span class="line">    Cr√©er / modifier un livre</span>
<span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endblock</span> <span class="token delimiter punctuation">%}</span></span></span>
<span class="line"></span>
<span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">block</span> body <span class="token delimiter punctuation">%}</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> block<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">&#39;</span>title<span class="token punctuation">&#39;</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> form_start<span class="token punctuation">(</span>form<span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></span>
<span class="line">        <span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> form_errors<span class="token punctuation">(</span>form<span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></span>
<span class="line">        <span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> form_row<span class="token punctuation">(</span>form<span class="token punctuation">.</span>title<span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></span>
<span class="line">        <span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> form_row<span class="token punctuation">(</span>form<span class="token punctuation">.</span>publishedAt<span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></span>
<span class="line">        <span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> form_row<span class="token punctuation">(</span>form<span class="token punctuation">.</span>authors<span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></span>
<span class="line">        <span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> form_row<span class="token punctuation">(</span>form<span class="token punctuation">.</span>chapters<span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></span>
<span class="line"></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Valider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> form_end<span class="token punctuation">(</span>form<span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></span>
<span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endblock</span> <span class="token delimiter punctuation">%}</span></span></span>
<span class="line"></span>
<span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">block</span> javascripts <span class="token delimiter punctuation">%}</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> asset<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">&#39;</span>js/collection.js<span class="token punctuation">&#39;</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endblock</span> <span class="token delimiter punctuation">%}</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="theme-de-formulaire" tabindex="-1"><a class="header-anchor" href="#theme-de-formulaire"><span>Th√®me de formulaire</span></a></h5><p>Un exemple de th√®me <code>form/theme.html.twig</code> :</p><div class="language-twig line-numbers-mode" data-highlighter="prismjs" data-ext="twig" data-title="twig"><pre><code><span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">block</span> collection_row <span class="token delimiter punctuation">%}</span></span></span>
<span class="line">    <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">if</span> label <span class="token delimiter punctuation">%}</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> label <span class="token delimiter punctuation">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endif</span> <span class="token delimiter punctuation">%}</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add_item_link btn btn-success<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-collection-holder-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> id <span class="token delimiter punctuation">}}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        Ajouter</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span></span>
<span class="line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> id <span class="token delimiter punctuation">}}</span></span> list-unstyled<span class="token punctuation">&quot;</span></span></span>
<span class="line">        <span class="token attr-name">data-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> form<span class="token operator">|</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> form<span class="token operator">|</span>last<span class="token punctuation">.</span>vars<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token number">0</span> <span class="token delimiter punctuation">}}</span></span><span class="token punctuation">&quot;</span></span></span>
<span class="line">        <span class="token attr-name">data-prototype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> form_widget<span class="token punctuation">(</span>form<span class="token punctuation">.</span>vars<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token operator">|</span>e<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">&#39;</span>html_attr<span class="token punctuation">&#39;</span></span><span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span><span class="token punctuation">&quot;</span></span></span>
<span class="line">        <span class="token attr-name">data-prototype-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>__<span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> form<span class="token punctuation">.</span>vars<span class="token punctuation">.</span>name <span class="token delimiter punctuation">}}</span></span>__<span class="token punctuation">&quot;</span></span></span>
<span class="line">        <span class="token attr-name">data-collection-holder</span></span>
<span class="line">    <span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">for</span> childForm <span class="token operator">in</span> form <span class="token delimiter punctuation">%}</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-collection-element</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">                <span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> form_widget<span class="token punctuation">(</span>childForm<span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endfor</span> <span class="token delimiter punctuation">%}</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token twig language-twig"><span class="token delimiter punctuation">{%</span> <span class="token tag-name keyword">endblock</span> collection_row <span class="token delimiter punctuation">%}</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10)),s("p",null,[n[16]||(n[16]=a("Pour ")),e(o,{to:"/symfony/25-formulaires.html#appliquer-les-themes"},{default:t(()=>n[15]||(n[15]=[a("inclure le th√®me, vous avez plusieurs possibilit√©s mentionn√©es dans le cours")])),_:1}),n[17]||(n[17]=a("."))]),n[30]||(n[30]=l(`<h5 id="js" tabindex="-1"><a class="header-anchor" href="#js"><span>JS</span></a></h5><p>Mon fichier <code>public/js/collection.js</code> :</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> <span class="token function-variable function">addFormToCollection</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> collectionHolder <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>collectionHolderClass</span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">const</span> item <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">let</span> protoName <span class="token operator">=</span> collectionHolder<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>prototypeName<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>protoName<span class="token punctuation">,</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    item<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> collectionHolder<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span></span>
<span class="line">        regex<span class="token punctuation">,</span></span>
<span class="line">        collectionHolder<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>index</span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    collectionHolder<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    collectionHolder<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>index<span class="token operator">++</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">addChildFormDeleteLink</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">initEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">addChildFormDeleteLink</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> removeFormButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    removeFormButton<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">&quot;Supprimer&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    removeFormButton<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    removeFormButton<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;btn-danger&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    item<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>removeFormButton<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    removeFormButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// remove the li for the tag form</span></span>
<span class="line">        item<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">initEvents</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;[data-collection-element]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">addChildFormDeleteLink</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;.add_item_link&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">btn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        btn<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> addFormToCollection<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> addFormToCollection<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">initEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="envoi-de-fichiers-vichuploaderbundle" tabindex="-1"><a class="header-anchor" href="#envoi-de-fichiers-vichuploaderbundle"><span>Envoi de fichiers (VichUploaderBundle)</span></a></h3><p>Je vous conseille tr√®s fortement d&#39;<a href="https://github.com/dustin10/VichUploaderBundle" target="_blank" rel="noopener noreferrer">utiliser VichUploaderBundle pour g√©rer l&#39;envoi de fichiers</a></p>`,5))])}const f=c(m,[["render",v],["__file","25-formulaires.html.vue"]]),h=JSON.parse('{"path":"/symfony/25-formulaires.html","title":"Formulaires","lang":"fr-FR","frontmatter":{"date":"2021-03-03T00:00:00.000Z"},"headers":[{"level":2,"title":"Pour r√©sumer","slug":"pour-resumer","link":"#pour-resumer","children":[]},{"level":2,"title":"Informations importantes avant de commencer","slug":"informations-importantes-avant-de-commencer","link":"#informations-importantes-avant-de-commencer","children":[]},{"level":2,"title":"Cr√©er un formulaire","slug":"creer-un-formulaire","link":"#creer-un-formulaire","children":[]},{"level":2,"title":"Utiliser ce formulaire dans un controller","slug":"utiliser-ce-formulaire-dans-un-controller","link":"#utiliser-ce-formulaire-dans-un-controller","children":[]},{"level":2,"title":"Afficher le formulaire","slug":"afficher-le-formulaire","link":"#afficher-le-formulaire","children":[{"level":3,"title":"Personnaliser tous les formulaires","slug":"personnaliser-tous-les-formulaires","link":"#personnaliser-tous-les-formulaires","children":[]},{"level":3,"title":"Les th√®mes de formulaire","slug":"les-themes-de-formulaire","link":"#les-themes-de-formulaire","children":[]}]},{"level":2,"title":"Validation","slug":"validation","link":"#validation","children":[{"level":3,"title":"Jeton CSRF","slug":"jeton-csrf","link":"#jeton-csrf","children":[]}]},{"level":2,"title":"Transmettre des options","slug":"transmettre-des-options","link":"#transmettre-des-options","children":[{"level":3,"title":"OptionResolver","slug":"optionresolver","link":"#optionresolver","children":[]}]},{"level":2,"title":"Types particuliers","slug":"types-particuliers","link":"#types-particuliers","children":[{"level":3,"title":"EntityType","slug":"entitytype","link":"#entitytype","children":[]},{"level":3,"title":"CollectionType","slug":"collectiontype","link":"#collectiontype","children":[]},{"level":3,"title":"Envoi de fichiers (VichUploaderBundle)","slug":"envoi-de-fichiers-vichuploaderbundle","link":"#envoi-de-fichiers-vichuploaderbundle","children":[]}]}],"git":{"updatedTime":1736283917000},"filePathRelative":"symfony/25-formulaires.md"}');export{f as comp,h as data};
