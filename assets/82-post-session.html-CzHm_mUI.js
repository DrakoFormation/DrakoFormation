import{aj as o,ak as t,am as n,ar as s,an as i,ao as l,al as r,ap as c,aq as p}from"./app-BkblVdII.js";const u={},d={class:"table-of-contents"};function m(v,e){const a=c("router-link");return p(),t("div",null,[e[9]||(e[9]=n("h1",{id:"exercices-post-et-session",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#exercices-post-et-session"},[n("span",null,[s("Exercices - "),n("code",null,"POST"),s(" et "),n("code",null,"SESSION")])])],-1)),n("nav",d,[n("ul",null,[n("li",null,[i(a,{to:"#_14-creer-une-page-de-connexion"},{default:l(()=>e[0]||(e[0]=[s("14. Cr√©er une page de connexion")])),_:1}),n("ul",null,[n("li",null,[i(a,{to:"#correction-des-exercices-13-et-14"},{default:l(()=>e[1]||(e[1]=[s("Correction des exercices 13 et 14")])),_:1})])])]),n("li",null,[i(a,{to:"#_15-mise-en-place-de-la-session"},{default:l(()=>e[2]||(e[2]=[s("15. Mise en place de la session")])),_:1})]),n("li",null,[i(a,{to:"#_16-creer-une-page-de-deconnexion"},{default:l(()=>e[3]||(e[3]=[s("16. Cr√©er une page de d√©connexion")])),_:1}),n("ul",null,[n("li",null,[i(a,{to:"#astuces"},{default:l(()=>e[4]||(e[4]=[s("Astuces")])),_:1})]),n("li",null,[i(a,{to:"#correction-des-exercices-15-et-16"},{default:l(()=>e[5]||(e[5]=[s("Correction des exercices 15 et 16")])),_:1})])])]),n("li",null,[i(a,{to:"#_17-verification-du-mot-de-passe"},{default:l(()=>e[6]||(e[6]=[s("17. V√©rification du mot de passe")])),_:1}),n("ul",null,[n("li",null,[i(a,{to:"#creer-une-pr-pull-request"},{default:l(()=>e[7]||(e[7]=[s("Cr√©er une PR (Pull Request)")])),_:1})]),n("li",null,[i(a,{to:"#correction"},{default:l(()=>e[8]||(e[8]=[s("Correction")])),_:1})])])])])]),e[10]||(e[10]=r('<p>Pr√©-requis :</p><ul><li>avoir un environnement de travail (<a href="https://www.wampserver.com/" target="_blank" rel="noopener noreferrer">Wamp</a> / <a href="https://www.apachefriends.org/fr/index.html" target="_blank" rel="noopener noreferrer">Xampp</a> / <a href="https://www.mamp.info/en/downloads/" target="_blank" rel="noopener noreferrer">Mamp</a> ou √©quivalent)</li><li>avoir des bases de PHP</li></ul><p>Correction :</p><ul><li>En vid√©o, tout le long des exercices (apr√®s l&#39;√©nonc√© correspondant)</li><li>Dans le code, sur <a href="https://github.com/Dreeckan/beanies/pulls?q=is%3Apr" target="_blank" rel="noopener noreferrer">le repository d√©di√© aux corrections sur GitHub</a>.</li></ul><h2 id="_14-creer-une-page-de-connexion" tabindex="-1"><a class="header-anchor" href="#_14-creer-une-page-de-connexion"><span>14. Cr√©er une page de connexion</span></a></h2><p>Cr√©ons une nouvelle page de connexion, avec un formulaire. Il s&#39;agit maintenant de g√©rer le formulaire, en r√©cup√©rant les donn√©es <code>$_POST</code> lors de sa soumission, et nous les retiendront en session plus tard.</p><ul><li>Cr√©er une page <code>login.php</code> (√† la racine du projet, avec les autres pages)</li><li>Y ajouter un formulaire de connexion (un champ login, un champ password et un bouton de validation)</li><li>Le mettre en forme avec Bootstrap</li><li>Afficher le login de l&#39;utilisateur dans le menu √† la soumission du formulaire</li><li>Cette valeur (<code>$_POST[&#39;login&#39;]</code>) pouvant ne pas exister, bien s&#39;assurer de son existence avant affichage</li></ul><h3 id="correction-des-exercices-13-et-14" tabindex="-1"><a class="header-anchor" href="#correction-des-exercices-13-et-14"><span>Correction des exercices 13 et 14</span></a></h3>',8)),e[11]||(e[11]=n("iframe",{class:"yt-video",src:"https://www.youtube.com/embed/K4EhNb3wHzc",title:"Exercice 1",frameborder:"0",allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; web-share",allowfullscreen:""},null,-1)),e[12]||(e[12]=r(`<h2 id="_15-mise-en-place-de-la-session" tabindex="-1"><a class="header-anchor" href="#_15-mise-en-place-de-la-session"><span>15. Mise en place de la session</span></a></h2><p>Mettons en route la session et ajoutons-y le login de l&#39;utilisateur lors de sa connexion.</p><ul><li>Ajouter le <code>session_start()</code> √† l&#39;endroit ad√©quat</li><li>Lors de la connexion de l&#39;utilisateur, mettre son login en session</li><li>Afficher ce login depuis la session, s&#39;il est disponible</li></ul><h2 id="_16-creer-une-page-de-deconnexion" tabindex="-1"><a class="header-anchor" href="#_16-creer-une-page-de-deconnexion"><span>16. Cr√©er une page de d√©connexion</span></a></h2><p>Maintenant que l&#39;on sait cr√©er la session, voyons comment la d√©truire.</p><ul><li>Cr√©er une page <code>logout.php</code></li><li>Cette page ne va contenir que quelques lignes</li><li>Utiliser la fonction <code>session_destroy()</code> pour d√©truire les donn√©es en session</li><li>une fois la fonction appel√©e (avec succ√®s üòâ ), utiliser la fonction <code>header()</code> pour rediriger vers la page <code>index.php</code> (et donc, pas besoin d&#39;appeler quoique ce soit d&#39;autre)</li></ul><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token comment">// Cette fonction a une utilisation assez particuli√®re,</span></span>
<span class="line"><span class="token comment">// Voici l&#39;√©criture pour rediriger vers la page index.php</span></span>
<span class="line"><span class="token function">header</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Location: index.php&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="astuces" tabindex="-1"><a class="header-anchor" href="#astuces"><span>Astuces</span></a></h3><p>Si vous souhaitez afficher un message alors que vous avez une redirection avec <code>header()</code>, vous pouvez passer un param√®tre <code>$_GET</code> :</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token comment">// Dans logout.php :</span></span>
<span class="line"><span class="token comment">// On transmet un param√®tre GET pour noter que l&#39;utilisateur est d√©connect√©</span></span>
<span class="line"><span class="token function">header</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Location: index.php?disconnected=1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Dans header.php (par exemple) :</span></span>
<span class="line"><span class="token comment">// On r√©cup√®re le param√®tre, s&#39;il existe, et on affiche un message</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;disconnected&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;disconnected&#39;</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;&lt;div&gt;Vous √™tes d√©connect√©&lt;/div&gt;&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="correction-des-exercices-15-et-16" tabindex="-1"><a class="header-anchor" href="#correction-des-exercices-15-et-16"><span>Correction des exercices 15 et 16</span></a></h3>`,11)),e[13]||(e[13]=n("iframe",{class:"yt-video",src:"https://www.youtube.com/embed/awE1mpV75Rk",title:"Exercice 1",frameborder:"0",allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; web-share",allowfullscreen:""},null,-1)),e[14]||(e[14]=r('<h2 id="_17-verification-du-mot-de-passe" tabindex="-1"><a class="header-anchor" href="#_17-verification-du-mot-de-passe"><span>17. V√©rification du mot de passe</span></a></h2><p>Validons maintenant les donn√©es entr√©es dans le formulaire, pour √™tre dans des conditions plus proches de la r√©alit√©.</p><ul><li>Ajouter (dans <code>variables.php</code> par exemple) une valeur de mot de passe attendue (par exemple &#39;toto&#39;)</li><li>Dans le formulaire de connexion, v√©rifier que le mot de passe est correct <ul><li>Si √ßa n&#39;est pas le cas, afficher un message d&#39;erreur</li><li>Si c&#39;est le cas, afficher un message de r√©ussite et ajouter le login dans la session</li></ul></li><li>V√©rifier √©galement que le login n&#39;est pas vide (et afficher un message d&#39;erreur si c&#39;est le cas)</li><li>Mettre en forme les messages avec Bootstrap (composant <a href="https://getbootstrap.com/docs/5.1/components/alerts/" target="_blank" rel="noopener noreferrer">alerts</a> par exemple)</li></ul><h3 id="creer-une-pr-pull-request" tabindex="-1"><a class="header-anchor" href="#creer-une-pr-pull-request"><span>Cr√©er une PR (Pull Request)</span></a></h3><ul><li>Cr√©er une Pull Request</li><li>Invitez quelqu&#39;un.e qui n&#39;est pas votre voisin.e sur votre projet</li><li>Faites vous inviter par cette personne √©galement</li><li>Relisez le code et faites vos retours</li><li>Approuvez (ou non) sa PR</li><li>Une fois votre PR valid√©e par un.e pair.e, vous pouvez la fusionner (merge)</li></ul><h3 id="correction" tabindex="-1"><a class="header-anchor" href="#correction"><span>Correction</span></a></h3>',6)),e[15]||(e[15]=n("iframe",{class:"yt-video",src:"https://www.youtube.com/embed/p0kVcURQqcw",title:"Exercice 1",frameborder:"0",allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; web-share",allowfullscreen:""},null,-1))])}const f=o(u,[["render",m],["__file","82-post-session.html.vue"]]),g=JSON.parse('{"path":"/php/82-post-session.html","title":"Exercices - POST et SESSION","lang":"fr-FR","frontmatter":{"date":"2023-04-06T00:00:00.000Z"},"headers":[{"level":2,"title":"14. Cr√©er une page de connexion","slug":"_14-creer-une-page-de-connexion","link":"#_14-creer-une-page-de-connexion","children":[{"level":3,"title":"Correction des exercices 13 et 14","slug":"correction-des-exercices-13-et-14","link":"#correction-des-exercices-13-et-14","children":[]}]},{"level":2,"title":"15. Mise en place de la session","slug":"_15-mise-en-place-de-la-session","link":"#_15-mise-en-place-de-la-session","children":[]},{"level":2,"title":"16. Cr√©er une page de d√©connexion","slug":"_16-creer-une-page-de-deconnexion","link":"#_16-creer-une-page-de-deconnexion","children":[{"level":3,"title":"Astuces","slug":"astuces","link":"#astuces","children":[]},{"level":3,"title":"Correction des exercices 15 et 16","slug":"correction-des-exercices-15-et-16","link":"#correction-des-exercices-15-et-16","children":[]}]},{"level":2,"title":"17. V√©rification du mot de passe","slug":"_17-verification-du-mot-de-passe","link":"#_17-verification-du-mot-de-passe","children":[{"level":3,"title":"Cr√©er une PR (Pull Request)","slug":"creer-une-pr-pull-request","link":"#creer-une-pr-pull-request","children":[]},{"level":3,"title":"Correction","slug":"correction","link":"#correction","children":[]}]}],"git":{"updatedTime":1736283917000},"filePathRelative":"php/82-post-session.md"}');export{f as comp,g as data};
