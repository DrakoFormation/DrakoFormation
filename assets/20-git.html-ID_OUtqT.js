import{aj as l,ak as t,al as a,am as s,ar as e,an as p,ao as r,ap as o,aq as c}from"./app-BkblVdII.js";const d={};function u(v,n){const i=o("RouteLink");return c(),t("div",null,[n[3]||(n[3]=a('<h1 id="integrer-git-dans-le-processus" tabindex="-1"><a class="header-anchor" href="#integrer-git-dans-le-processus"><span>Int√©grer Git dans le processus</span></a></h1><h2 id="utiliser-ssh-et-git" tabindex="-1"><a class="header-anchor" href="#utiliser-ssh-et-git"><span>Utiliser SSH et Git</span></a></h2><h3 id="configurer-openssh" tabindex="-1"><a class="header-anchor" href="#configurer-openssh"><span>Configurer OpenSSH</span></a></h3><p>Dans un premier temps, il faut s&#39;assurer d&#39;avoir :</p><ul><li>install√© OpenSSH (il faut se rendre dans les fonctionnalit√©s facultatives de Windows)</li><li>un agent SSH qui fonctionne (je vous conseille de le faire d√©marrer avec votre syst√®me, en ex√©cutant cette commande <strong>dans un powershell, d√©marr√© en tant qu&#39;administrateur</strong> : <code>Set-Service ssh-agent -StartupType Automatic</code>)</li><li>une paire de cl√©s SSH (Utiliser <code>ssh-keygen</code> pour en g√©n√©rer)</li><li>que votre cl√© soit ajout√©e √† votre trousseau en cours (<code>ssh-add chemin/vers/la/cl√©/priv√©e</code> si √ßa n&#39;est pas le cas)</li><li>que la cl√© publique soit ajout√©e √† votre compte GitHub <strong>et</strong> au serveur (<code>ssh-copy-id utilisateur@ip-du-serveur</code> si √ßa n&#39;est pas d√©j√† fait)</li></ul><p>Si besoin, j&#39;ai √©galement fait une vid√©o sur la configuration d&#39;OpenSSH sous Windows :</p>',6)),n[4]||(n[4]=s("div",{style:{position:"relative","padding-bottom":"56.25%",height:"0"}},[s("iframe",{src:"https://www.loom.com/embed/988ded8daf40416fa5ae9278580f9624",frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:"",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}})],-1)),n[5]||(n[5]=s("h3",{id:"deployer",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#deployer"},[s("span",null,"D√©ployer")])],-1)),n[6]||(n[6]=s("p",null,"En vid√©o :",-1)),n[7]||(n[7]=s("div",{style:{position:"relative","padding-bottom":"56.25%",height:"0"}},[s("iframe",{src:"https://www.loom.com/embed/9e0fc06958dc425bb0dbe600bcdd2d29",frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:"",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}})],-1)),n[8]||(n[8]=s("p",null,"Une fois les questions de configuration SSH r√©gl√©es, il faut configurer le serveur (Apache ou Nginx) et mettre en ligne les fichiers.",-1)),n[9]||(n[9]=s("p",null,[e("Pour cette derni√®re √©tape, c'est tr√®s simple, il nous suffit de faire un "),s("code",null,"git clone"),e(" de notre projet, pour la premi√®re installation, ou un "),s("code",null,"git pull"),e(" par la suite üòÉ .")],-1)),n[10]||(n[10]=s("h3",{id:"configurer-un-serveur",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#configurer-un-serveur"},[s("span",null,"Configurer un serveur")])],-1)),n[11]||(n[11]=s("p",null,"En vid√©o :",-1)),n[12]||(n[12]=s("div",{style:{position:"relative","padding-bottom":"56.25%",height:"0"}},[s("iframe",{src:"https://www.loom.com/embed/369d2b7d36ce43f5aa5012c1e097bbb7",frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:"",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}})],-1)),s("p",null,[n[1]||(n[1]=e("Dans la vid√©o ci-dessus, je vous pr√©sente la configuration avec Nginx, mais je vous renvoie au ")),p(i,{to:"/lamp/"},{default:r(()=>n[0]||(n[0]=[e("cours sur LAMP")])),_:1}),n[2]||(n[2]=e(" pour l'installation et la configuration d'un serveur avec Apache, MySQL et Php."))]),n[13]||(n[13]=a(`<p>Des exemples de configuration Nginx, pr√©sent√©s dans la vid√©o :</p><h4 id="une-configuration-simple-pour-afficher-un-site-statique-site-en-html-css-et-js" tabindex="-1"><a class="header-anchor" href="#une-configuration-simple-pour-afficher-un-site-statique-site-en-html-css-et-js"><span>Une configuration simple, pour afficher un site statique (site en HTML, CSS et JS)</span></a></h4><div class="language-nginx line-numbers-mode" data-highlighter="prismjs" data-ext="nginx" data-title="nginx"><pre><code><span class="line"><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment"># On indique la racine de nos fichiers.</span></span>
<span class="line">    <span class="token directive"><span class="token keyword">root</span> /var/www/formation-hb.drakolab.fr/current/.vuepress/dist</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment"># Par d√©faut, quand on cherche un dossier, on charge </span></span>
<span class="line">    <span class="token comment"># automatiquement le fichier index.html de ce dossier,</span></span>
<span class="line">    <span class="token comment"># sans avoir √† l&#39;appeler explicitement.</span></span>
<span class="line">    <span class="token directive"><span class="token keyword">index</span> index.html</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment"># On d√©fini les domaines qui appelleront le site.</span></span>
<span class="line">    <span class="token directive"><span class="token keyword">server_name</span> formation-hb.drakolab.fr</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="une-configuration-complexe-pour-un-site-symfony-recuperee-de-la-documentation-de-symfony" tabindex="-1"><a class="header-anchor" href="#une-configuration-complexe-pour-un-site-symfony-recuperee-de-la-documentation-de-symfony"><span>Une configuration complexe, pour un site Symfony (r√©cup√©r√©e de <a href="https://symfony.com/doc/current/setup/web_server_configuration.html#nginx" target="_blank" rel="noopener noreferrer">la documentation de Symfony</a>)</span></a></h4><div class="language-nginx line-numbers-mode" data-highlighter="prismjs" data-ext="nginx" data-title="nginx"><pre><code><span class="line"><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment"># On d√©fini les domaines qui appelleront le site.</span></span>
<span class="line">    <span class="token comment"># Ici, on a 2 domaines et tous leurs sous-domaines.</span></span>
<span class="line">    <span class="token directive"><span class="token keyword">server_name</span></span>
<span class="line">        heureuxdesordre.com *.heureuxdesordre.com</span>
<span class="line">        heureuxdesordre.fr *.heureuxdesordre.fr</span></span>
<span class="line">    <span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># La racine de notre site.</span></span>
<span class="line">    <span class="token directive"><span class="token keyword">root</span> /var/www/heureuxdesordre.com/current/public</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment"># Par d√©faut, on essaie de r√©pondre √† la requ√™te en allant chercher </span></span>
<span class="line">        <span class="token comment"># un fichier. Si √ßa n&#39;est pas un fichier, on envoie la requ√™te √† index.php</span></span>
<span class="line">        <span class="token comment"># Voir le fonctionnement de Symfony et de son Front Controller ;).</span></span>
<span class="line">        <span class="token directive"><span class="token keyword">try_files</span> <span class="token variable">$uri</span> /index.php<span class="token variable">$is_args</span><span class="token variable">$args</span></span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment"># Pour toutes les requ√™tes passant par index.php,</span></span>
<span class="line">    <span class="token comment"># on va faire interpr√™ter la requ√™te par Php-fpm</span></span>
<span class="line">    <span class="token comment"># (serveur d&#39;application de Php).</span></span>
<span class="line">    <span class="token directive"><span class="token keyword">location</span> ~ ^/index\\.php(/|$)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token directive"><span class="token keyword">fastcgi_pass</span> unix:/var/run/php/php7.4-fpm.sock</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token directive"><span class="token keyword">fastcgi_split_path_info</span> ^(.+\\.php)(/.*)$</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token directive"><span class="token keyword">include</span> fastcgi_params</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token directive"><span class="token keyword">fastcgi_param</span> SCRIPT_FILENAME <span class="token variable">$realpath_root</span><span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token directive"><span class="token keyword">fastcgi_param</span> DOCUMENT_ROOT <span class="token variable">$realpath_root</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># Remove the internal directive to allow URIs like this</span></span>
<span class="line">        <span class="token directive"><span class="token keyword">internal</span></span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># Si on cherche √† acc√©der √† un fichier .php (autre que index.php),</span></span>
<span class="line">    <span class="token comment"># On retourne une erreur 404.</span></span>
<span class="line">    <span class="token directive"><span class="token keyword">location</span> ~ \\.php$</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token directive"><span class="token keyword">return</span> <span class="token number">404</span></span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># On indique o√π vont √™tre stock√© les logs d&#39;erreur et d&#39;acc√®s.</span></span>
<span class="line">    <span class="token directive"><span class="token keyword">error_log</span> /var/log/nginx/heureuxdesordre/error.log</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token directive"><span class="token keyword">access_log</span> /var/log/nginx/heureuxdesordre/access.log</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5))])}const k=l(d,[["render",u],["__file","20-git.html.vue"]]),f=JSON.parse('{"path":"/deploy/20-git.html","title":"Int√©grer Git dans le processus","lang":"fr-FR","frontmatter":{},"headers":[{"level":2,"title":"Utiliser SSH et Git","slug":"utiliser-ssh-et-git","link":"#utiliser-ssh-et-git","children":[{"level":3,"title":"Configurer OpenSSH","slug":"configurer-openssh","link":"#configurer-openssh","children":[]},{"level":3,"title":"D√©ployer","slug":"deployer","link":"#deployer","children":[]},{"level":3,"title":"Configurer un serveur","slug":"configurer-un-serveur","link":"#configurer-un-serveur","children":[]}]}],"git":{"updatedTime":1736697822000},"filePathRelative":"deploy/20-git.md"}');export{k as comp,f as data};
