import{aj as r,ak as c,am as n,an as e,ao as o,al as p,ap as l,aq as u,ar as t}from"./app-BkblVdII.js";const d="/cours/assets/symfony_fichiers-CXkJ9f7X.png",m={},k={class:"table-of-contents"};function v(q,s){const a=l("router-link"),i=l("Mermaid");return u(),c("div",null,[s[5]||(s[5]=n("h1",{id:"structure-et-utilisation-d-un-projet",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#structure-et-utilisation-d-un-projet"},[n("span",null,"Structure et utilisation d'un projet")])],-1)),n("nav",k,[n("ul",null,[n("li",null,[e(a,{to:"#pour-resumer"},{default:o(()=>s[0]||(s[0]=[t("Pour r√©sumer")])),_:1})]),n("li",null,[e(a,{to:"#structure-d-un-projet-symfony"},{default:o(()=>s[1]||(s[1]=[t("Structure d'un projet Symfony")])),_:1})]),n("li",null,[e(a,{to:"#composer"},{default:o(()=>s[2]||(s[2]=[t("Composer")])),_:1}),n("ul",null,[n("li",null,[e(a,{to:"#installer-les-dependances-d-un-projet"},{default:o(()=>s[3]||(s[3]=[t("Installer les d√©pendances d'un projet")])),_:1})])])]),n("li",null,[e(a,{to:"#fonctionnement-global"},{default:o(()=>s[4]||(s[4]=[t("Fonctionnement global")])),_:1})])])]),s[6]||(s[6]=n("div",{style:{position:"relative","padding-bottom":"56.25%",height:"0"}},[n("iframe",{src:"https://www.loom.com/embed/622baa4b041c4db7a4afaacc93b9509d",frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:"",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}})],-1)),s[7]||(s[7]=p('<h2 id="pour-resumer" tabindex="-1"><a class="header-anchor" href="#pour-resumer"><span>Pour r√©sumer</span></a></h2><ul><li><code>composer install</code> pour t√©l√©charger le contenu du dossier <code>vendor</code> (non versionn√©) ou le mettre √† jour √† partir du <code>composer.lock</code></li><li><code>composer update</code> pour mettre √† jour le contenu du dossier <code>vendor</code> avec les derni√®res versions disponibles (modifie le <code>composer.lock</code> et <code>symfony.lock</code>)</li><li>La configuration d&#39;un projet Symfony se passe dans <code>.env</code> ou <code>.env.local</code> (configuration li√©e √† la machine qui lance le projet) ou dans le dossier <code>config</code> (configuration des librairies utilis√©es)</li><li><strong>Tous</strong> les fichiers visibles par les utilisateurs du site (css, js, etc.) sont dans le dossier <code>public</code></li><li>Le code Php que nous allons produire se trouve dans <code>src</code></li><li>Les vues (templates Twig) se trouvent dans <code>templates</code></li></ul><h2 id="structure-d-un-projet-symfony" tabindex="-1"><a class="header-anchor" href="#structure-d-un-projet-symfony"><span>Structure d&#39;un projet Symfony</span></a></h2><p>Regardons le contenu du projet que nous venons de cr√©er. Il contient d√©j√† de nombreux fichiers et dossiers :</p><p><img src="'+d+`" alt=""></p><p>Prenons d&#39;abord les dossiers dans l&#39;ordre d&#39;apparition :</p><ul><li><code>bin</code> : contient les &quot;binaires&quot;, des fichiers ex√©cutables en ligne de commande, qui vont nous √™tre utiles dans le d√©veloppement, mais aussi pour notre application (<code>bin/console</code> en particulier va beaucoup nous servir)</li><li><code>config</code> : La configuration des diff√©rents √©l√©ments du site. Les routes, les services et les configurations des librairies utilis√©es</li><li><code>migrations</code> : je l&#39;ai √©voqu√© avec PDO, les fichiers permettant de passer d&#39;une version √† l&#39;autre de notre base de donn√©es seront rang√©s ici</li><li><code>public</code> : la face visible de notre site. Ce dossier est le seul visible par le serveur. Tout se passe autour de l&#39;appel du fichier <code>index.php</code> (qui est notre front controller)</li><li><code>src</code> : c&#39;est ici que nous allons travailler la plupart du temps. Ce dossier aura sa pr√©sentation √† part</li><li><code>templates</code> : un autre dossier essentiel et que l&#39;on va tout le temps utiliser (sauf si on code une API), car il contient toutes les vues du site (tout le HTML, pour simplifier üòâ )</li><li><code>tests</code> : le repaire des tests unitaires et fonctionnels</li><li><code>translations</code> : les traductions de vos textes iront dans ce dossier</li><li><code>var</code> : des fichiers temporaires (cache, logs, etc.) qui vont servir de ressources pour l&#39;ex√©cution de notre site. Il est g√©r√© par Symfony et nous n&#39;avons pas souvent besoin d&#39;y modifier des √©l√©ments</li><li><code>vendor</code> : les librairies dont nous allons nous servir (dont Symfony !). Il est g√©r√© par composer et nous n&#39;allons pas souvent en voir le contenu (m√™me si l&#39;on s&#39;en sert üòâ )</li></ul><p>Ensuite, nous avons quelques fichiers √† regarder de plus pr√®s :</p><ul><li><code>.env</code> et <code>.env.test</code> : ces fichiers contiennent des variables d&#39;environnement, qui vont nous permettre de configurer notre site (identifiants de base de donn√©es, etc.) pour les diff√©rents <strong>environnements</strong> que nous allons utiliser</li><li><code>composer.json</code>, <code>composer.lock</code> et <code>symfony.lock</code> : nous permettent de g√©rer les versions de nos d√©pendances PHP (librairies externes). Ils sont en g√©n√©ral modifi√©s lors de l&#39;utilisation de commandes <code>composer require</code>, ou <code>composer update</code> (mais jamais lors d&#39;un <code>composer install</code>)</li><li><code>.gitignore</code> : liste les fichiers qui ne sont pas versionn√©s par git dans le projet. Ajouter les v√¥tres peut √™tre utile (configuration de l&#39;IDE, images upload√©es, etc.)</li></ul><h2 id="composer" tabindex="-1"><a class="header-anchor" href="#composer"><span>Composer</span></a></h2><p>Comme nous n&#39;en avons pas parl√© jusqu&#39;√† maintenant, prenons le temps de voir ce qu&#39;est Composer.</p><p>Ils s&#39;agit d&#39;un outil de gestion de d√©pendances (dependency manager) pour PHP. Tout comme <code>npm</code> (javascript) et bien d&#39;autres, il permet de choisir les paquets (librairies) dont nous allons avoir besoin et d&#39;en choisir des versions plus ou moins pr√©cise. L&#39;int√©r√™t est ici de :</p><ul><li>t√©l√©charger les librairies dont on a besoin, dans les bonnes versions, et de s&#39;assurer de pouvoir facilement les mettre √† jour</li><li>s&#39;assurer facilement que les d√©pendances de notre projet sont toujours bien compatibles entre elles</li></ul><p>Ouvrons maintenant un fichier <code>composer.json</code> (morceaux choisis) :</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;php&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&gt;=7.2.5&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;ext-ctype&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;ext-iconv&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;sensio/framework-extra-bundle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/asset&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/console&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/dotenv&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/expression-language&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/flex&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.3.1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/form&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/framework-bundle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/http-client&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/intl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/mailer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/mime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/monolog-bundle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/notifier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/orm-pack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/process&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/security-bundle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/serializer-pack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/string&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/translation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/twig-pack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/validator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/web-link&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/yaml&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;require-dev&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;symfony/debug-pack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/maker-bundle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/profiler-pack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;symfony/test-pack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;autoload&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;psr-4&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;App\\\\&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;autoload-dev&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;psr-4&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;App\\\\Tests\\\\&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tests/&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;auto-scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;cache:clear&quot;</span><span class="token operator">:</span> <span class="token string">&quot;symfony-cmd&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;assets:install %PUBLIC_DIR%&quot;</span><span class="token operator">:</span> <span class="token string">&quot;symfony-cmd&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;post-install-cmd&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">            <span class="token string">&quot;@auto-scripts&quot;</span></span>
<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;post-update-cmd&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">            <span class="token string">&quot;@auto-scripts&quot;</span></span>
<span class="line">        <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;extra&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;symfony&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;allow-contrib&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5.2.*&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Les fichiers <code>.lock</code> sont l√† pour assurer les versions pr√©cises de nos d√©pendances. Ils sont versionn√©s afin d&#39;assurer la coh√©rence entre d√©veloppeurs et entre serveurs (on s&#39;assure d&#39;avoir exactement les m√™mes versions partout).</p><h3 id="installer-les-dependances-d-un-projet" tabindex="-1"><a class="header-anchor" href="#installer-les-dependances-d-un-projet"><span>Installer les d√©pendances d&#39;un projet</span></a></h3><p>La commande <code>composer install</code> permet de r√©cup√©rer les versions d√©finies dans le fichier <code>.lock</code> (et de mettre √† jour votre projet si ce fichier a √©t√© modifi√©).</p><p>La commande <code>composer update</code> tente de mettre √† jour vos d√©pendances, en fonction des contraintes d√©finies dans le fichier <code>composer.json</code>. <strong>Attention</strong>, cette commande met √† jour le fichier <code>.lock</code>.</p><p>Si vous avez besoin d&#39;installer une nouvelle d√©pendance, il faudra utiliser <code>composer require nomDuPaquetAInstaller</code>. La commande exacte est en g√©n√©ral fournie dans la documentation d&#39;installation de la d√©pendance (et il est pr√©f√©rable de suivre cette source). Certains bundles utilisent des recettes pour cr√©er des fichiers suppl√©mentaires, mettre en place une configuration de base, etc. et il vaut mieux les y autoriser ! Ces recettes sont l√† pour vous faire gagner du temps, et elles le font bien üòâ .</p><h2 id="fonctionnement-global" tabindex="-1"><a class="header-anchor" href="#fonctionnement-global"><span>Fonctionnement global</span></a></h2>`,21)),e(i,{id:"mermaid-169",code:"eJx1kb9OwzAQh/c+xY8hihgq9gxlaGFAZQCJitVKLq2FYxf7XCFVfRdGuvMGeTEubpBSQiNF/vd9d+dzlu211Vxgn/OGGsqLvFL+LT8csmwS6D2SLWmh1dqrZgL5XlgbHRRT9JjOZrj3zvJcfu+MIV/ggbCj+AGjsFVrwg1T4KT+QZP+7GIXqsBT1KiVZhgCe5lIMZZxm8ye+j/hghplK4KKKLvt9tt07OvFnGl5osR21hIapxFl9O1x62yg5A44TDvx0VXtl6GhZCigklV7pJCknjkJZ5mWgu6cNu3nOLqwqyiB51LAbzVQda3LjfQw8XI+rn4pzb4cctSqVWK7pzm76KhJ18NnLnDHfRZcTX4AS2nGMw=="}),s[8]||(s[8]=p("<p>Le traitement d&#39;une requ√™te avec Symfony se fait en 10 √©tapes (pour r√©sumer üòâ ) :</p><ol><li>L&#39;utilisateur demande une page <code>/test</code>. C&#39;est le FrontController qui la re√ßoit</li><li>Le FrontController demande le contr√¥leur correspondant √† <code>/test</code> au routeur</li><li>Le routeur donne l&#39;objet et la m√©thode √† appeler</li><li>Le FrontController appelle le contr√¥leur et sa m√©thode</li><li>Le contr√¥leur appelle le mod√®le (BdD) pour r√©cup√©rer les donn√©es si besoin</li><li>Le mod√®le renvoie les donn√©es demand√©es</li><li>Le contr√¥leur traite ses donn√©es (fait ses calculs) et les envoie √† la vue pour construire un affichage</li><li>Le moteur de template renvoie la vue construite</li><li>Le contr√¥leur construit une r√©ponse et l&#39;envoie au FrontController</li><li>Le FrontController renvoie la r√©ponse √† l&#39;utilisateur</li></ol>",2))])}const f=r(m,[["render",v],["__file","10-structure.html.vue"]]),b=JSON.parse(`{"path":"/symfony/10-structure.html","title":"Structure et utilisation d'un projet","lang":"fr-FR","frontmatter":{"date":"2021-02-22T00:00:00.000Z"},"headers":[{"level":2,"title":"Pour r√©sumer","slug":"pour-resumer","link":"#pour-resumer","children":[]},{"level":2,"title":"Structure d'un projet Symfony","slug":"structure-d-un-projet-symfony","link":"#structure-d-un-projet-symfony","children":[]},{"level":2,"title":"Composer","slug":"composer","link":"#composer","children":[{"level":3,"title":"Installer les d√©pendances d'un projet","slug":"installer-les-dependances-d-un-projet","link":"#installer-les-dependances-d-un-projet","children":[]}]},{"level":2,"title":"Fonctionnement global","slug":"fonctionnement-global","link":"#fonctionnement-global","children":[]}],"git":{"updatedTime":1736283917000},"filePathRelative":"symfony/10-structure.md"}`);export{f as comp,b as data};
